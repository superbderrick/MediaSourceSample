(function(){var g={};
(function(window){var h,aa=this;function m(a,b){var c=a.split("."),d=aa;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function q(a,b){function c(){}c.prototype=b.prototype;a.bf=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Ze=function(a,c,f){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};function ba(a){var b=console[a];b?b.bind||(console[a]=function(){b.apply(console,arguments)}):console[a]=function(){}}ba("error");ba("warn");ba("info");ba("log");ba("debug");function ca(a){da[a]={Ab:ea(),end:NaN}}function fa(a){if(a=da[a])a.end=ea()}function ga(a){return(a=da[a])&&a.end?a.end-a.Ab:NaN}var ea=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now,da={};function ha(a,b,c){this.id=a;this.bandwidth=b||0;this.lang=c||"unknown";this.active=!1}m("shaka.player.AudioTrack.compare",function(a,b){return a.lang<b.lang?-1:a.lang>b.lang?1:a.bandwidth<b.bandwidth?-1:a.bandwidth>b.bandwidth?1:0});function ia(a,b){this.id=a;this.lang=b||"unknown";this.enabled=this.active=!1}m("shaka.player.TextTrack.compare",function(a,b){return a.lang<b.lang?-1:a.lang>b.lang?1:0});function ja(a,b,c,d){this.id=a;this.bandwidth=b||0;this.width=c||0;this.height=d||0;this.active=!1}function ka(a,b){var c=a.width*a.height,d=b.width*b.height;return c<d?-1:c>d?1:a.bandwidth<b.bandwidth?-1:a.bandwidth>b.bandwidth?1:0}m("shaka.player.VideoTrack.compare",ka);function la(){var a="CustomEvent"in window;if(a)try{new CustomEvent("")}catch(b){a=!1}a||(window.CustomEvent=ma)}m("shaka.polyfill.CustomEvent.install",la);function ma(a,b){var c=document.createEvent("CustomEvent"),d=b||{bubbles:!1,cancelable:!1,detail:null};c.initCustomEvent(a,!!d.bubbles,!!d.cancelable,d.detail);return c};function na(){var a=Element.prototype;a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||a.webkitRequestFullscreen;a=Document.prototype;a.exitFullscreen=a.exitFullscreen||a.mozCancelFullScreen||a.msExitFullscreen||a.webkitExitFullscreen;"fullscreenElement"in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}});document.addEventListener("webkitfullscreenchange",
oa);document.addEventListener("webkitfullscreenerror",oa);document.addEventListener("mozfullscreenchange",oa);document.addEventListener("mozfullscreenerror",oa);document.addEventListener("MSFullscreenChange",oa);document.addEventListener("MSFullscreenError",oa)}m("shaka.polyfill.Fullscreen.install",na);function oa(a){var b=a.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),b=new Event(b,a);a.target.dispatchEvent(b)};function pa(){return Promise.reject(Error("The key system specified is not supported."))}function qa(a){return null==a?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function ra(){throw new TypeError("Illegal constructor.");}ra.prototype.createSession=function(){};ra.prototype.setServerCertificate=function(){};function sa(){throw new TypeError("Illegal constructor.");}sa.prototype.getConfiguration=function(){};sa.prototype.createMediaKeys=function(){};function ta(){var a=HTMLVideoElement.prototype;a.getVideoPlaybackQuality||(a.getVideoPlaybackQuality=function(){return"webkitDroppedFrameCount"in this?{corruptedVideoFrames:0,droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,creationTime:null,totalFrameDelay:null}:null})}m("shaka.polyfill.VideoPlaybackQuality.install",ta);function ua(a,b){for(var c={},d=0;d<a.length;++d){var e=b?b(a[d]):a[d].toString();c[e]=a[d]}var d=[],f;for(f in c)d.push(c[f]);return d};function r(){return Date.now()+va}var va=0;function wa(a,b){this.j=a;this.Gc=b==xa;this.i=0}var xa=1;wa.prototype.Pa=function(){return this.i<this.j.byteLength};function ya(a){var b=a.j.getUint8(a.i);a.i+=1;return b}function z(a){var b=a.j.getUint32(a.i,a.Gc);a.i+=4;return b}function za(a){var b,c;a.Gc?(b=a.j.getUint32(a.i,!0),c=a.j.getUint32(a.i+4,!0)):(c=a.j.getUint32(a.i,!1),b=a.j.getUint32(a.i+4,!1));if(2097151<c)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");a.i+=8;return c*Math.pow(2,32)+b}
function Aa(a){if(a.i+16>a.j.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var b=new Uint8Array(a.j.buffer,a.i,16);a.i+=16;return b}function A(a,b){if(a.i+b>a.j.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");a.i+=b};function B(a){this.j=a;this.Wa=new wa(a,0);Ba||(Ba=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}var Ba;B.prototype.Pa=function(){return this.Wa.Pa()};
function C(a){var b;b=Ca(a);if(7<b.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var c=0,d=0;d<b.length;d++)c=256*c+b[d];b=c;c=Ca(a);a:{for(d=0;d<Ba.length;d++)if(Da(c,Ba[d])){d=!0;break a}d=!1}if(d)throw new RangeError("EbmlParser: Element cannot contain dynamically sized data.");if(8==c.length&&c[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var d=c[0]&(1<<8-c.length)-1,e=1;e<c.length;e++)d=256*d+c[e];c=d;c=
a.Wa.i+c<=a.j.byteLength?c:a.j.byteLength-a.Wa.i;d=new DataView(a.j.buffer,a.j.byteOffset+a.Wa.i,c);A(a.Wa,c);return new Ea(b,d)}function Ca(a){var b=ya(a.Wa),c;for(c=1;8>=c&&!(b&1<<8-c);c++);if(8<c)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var d=new Uint8Array(c);d[0]=b;for(b=1;b<c;b++)d[b]=ya(a.Wa);return d}function Ea(a,b){this.id=a;this.j=b}
function Fa(a){if(8<a.j.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==a.j.byteLength&&a.j.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var b=0,c=0;c<a.j.byteLength;c++)var d=a.j.getUint8(c),b=256*b+d;return b};function Ga(a){this.Yc=Math.exp(Math.log(.5)/a);this.rc=this.yc=0}Ga.prototype.sample=function(a,b){var c=Math.pow(this.Yc,a);this.yc=b*(1-c)+c*this.yc;this.rc+=a};function Ha(a){return a.yc/(1-Math.pow(a.Yc,a.rc))};function D(a){var b=new CustomEvent(a.type,{detail:a.detail,bubbles:!!a.bubbles}),c;for(c in a)c in b||(b[c]=a[c]);return b}function E(a){return new CustomEvent("error",{detail:a,bubbles:!0})};function Ia(a,b,c){Ja(b);Ja(c);return c==b||a>=Ka&&c==b.split("-")[0]||a>=La&&c.split("-")[0]==b.split("-")[0]?!0:!1}var Ka=1,La=2;function Ja(a){a=a.toLowerCase().split("-");var b=Ma[a[0]];b&&(a[0]=b);return a.join("-")}
var Ma={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",
fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",
lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",
srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function Na(a){return Object.keys(a).map(function(b){return a[b]})};function F(){this.ca={}}h=F.prototype;h.push=function(a,b){this.ca.hasOwnProperty(a)?this.ca[a].push(b):this.ca[a]=[b]};h.set=function(a,b){this.ca[a]=b};h.has=function(a){return this.ca.hasOwnProperty(a)};h.get=function(a){return(a=this.ca[a])?a.slice():null};function Oa(a){var b=[],c;for(c in a.ca)b.push.apply(b,a.ca[c]);return b}h.remove=function(a,b){var c=this.ca[a];if(c)for(var d=0;d<c.length;++d)c[d]==b&&(c.splice(d,1),--d)};h.keys=function(){var a=[],b;for(b in this.ca)a.push(b);return a};
h.clear=function(){this.ca={}};function Pa(){this.fb=new F}Pa.prototype.destroy=function(){Qa(this);this.fb=null};function G(a,b,c,d){b=new Ra(b,c,d);a.fb.push(c,b)}Pa.prototype.bb=function(a,b){for(var c=this.fb.get(b)||[],d=0;d<c.length;++d){var e=c[d];e.target==a&&(e.bb(),this.fb.remove(b,e))}};function Qa(a){for(var b=Oa(a.fb),c=0;c<b.length;++c)b[c].bb();a.fb.clear()}function Ra(a,b,c){this.target=a;this.type=b;this.pd=c;this.target.addEventListener(b,c,!1)}
Ra.prototype.bb=function(){this.target&&(this.target.removeEventListener(this.type,this.pd,!1),this.pd=this.target=null)};function H(a){this.Fc=new F;this.parent=a}m("shaka.util.FakeEventTarget",H);H.prototype.addEventListener=function(a,b,c){c||this.Fc.push(a,b)};H.prototype.removeEventListener=function(a,b,c){c||this.Fc.remove(a,b)};H.prototype.dispatchEvent=function(a){delete a.srcElement;delete a.target;delete a.currentTarget;Object.defineProperties(a,{srcElement:{value:null,writable:!0},target:{value:this,writable:!0},currentTarget:{value:null,writable:!0}});return Sa(this,a)};
function Sa(a,b){b.currentTarget=a;for(var c=a.Fc.get(b.type)||[],d=0;d<c.length;++d){var e=c[d];try{e.handleEvent?e.handleEvent(b):e.call(a,b)}catch(f){}}a.parent&&b.bubbles&&Sa(a.parent,b);return b.defaultPrevented};function Ta(){H.call(this,null);this.zc=new Ga(3);this.Gd=new Ga(10);this.ge=50;this.Qd=5E5;this.he=.5;this.fe=65536;this.md=0}q(Ta,H);m("shaka.util.EWMABandwidthEstimator",Ta);Ta.prototype.sample=function(a,b){if(!(b<this.fe)){a=Math.max(a,this.ge);var c=8E3*b/a,d=a/1E3;this.zc.sample(d,c);this.Gd.sample(d,c);this.dispatchEvent(D({type:"bandwidth"}));this.md=Date.now()}};Ta.prototype.getBandwidth=function(){return this.zc.rc<this.he?this.Qd:Math.min(Ha(this.zc),Ha(this.Gd))};
Ta.prototype.getDataAge=function(){return(Date.now()-this.md)/1E3};Ta.prototype.supportsCaching=function(){return!1};function I(){var a,b,c=new Promise(function(c,e){a=c;b=e});c.resolve=a;c.reject=b;return c};function Ua(){this.Tc=new I;this.la=!1;this.za=null;this.Ka=[];this.La=null}Ua.prototype.append=function(a){if(this.la)throw Error("Cannot append to a running task!");this.Ka.push(a)};Ua.prototype.start=function(){if(this.la)throw Error("Task already started!");this.la=!0;this.Ka.unshift(function(){});Va(this,void 0)};Ua.prototype.abort=function(){if(this.za)return this.za;if(!this.la)return this.la=!0,Promise.resolve();this.La&&this.La();return this.za=new I};Ua.prototype.end=function(){this.Ka.splice(1)};
function Va(a,b){var c=a.Ka[0](b),d;c?(d=c[0],a.La=c[1]):(d=Promise.resolve(),a.La=null);d.then(function(a){this.za?(this.Ka=[],this.La=null,Wa(this)):(this.Ka.shift(),this.Ka.length?Va(this,a):(this.Tc.resolve(a),this.La=null))}.bind(a)).catch(function(){this.Ka=[];this.La=null;this.za&&Wa(this)}.bind(a))}function Wa(a){var b=Error("Task aborted.");b.type="aborted";a.Tc.reject(b);window.setTimeout(function(){this.za.resolve();this.za=null}.bind(a),5)};function J(a,b){return b.bind(a)};function Xa(a){return String.fromCharCode.apply(null,a)}m("shaka.util.Uint8ArrayUtils.toString",Xa);function Ya(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b}m("shaka.util.Uint8ArrayUtils.fromString",Ya);function Za(a,b){var c=void 0==b?!0:b,d=window.btoa(Xa(a)).replace(/\+/g,"-").replace(/\//g,"_");return c?d:d.replace(/=*$/,"")}m("shaka.util.Uint8ArrayUtils.toBase64",Za);function $a(a){return Ya(window.atob(a.replace(/-/g,"+").replace(/_/g,"/")))}
m("shaka.util.Uint8ArrayUtils.fromBase64",$a);m("shaka.util.Uint8ArrayUtils.fromHex",function(a){for(var b=new Uint8Array(a.length/2),c=0;c<a.length;c+=2)b[c/2]=window.parseInt(a.substr(c,2),16);return b});function ab(a){for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);1==d.length&&(d="0"+d);b+=d}return b}m("shaka.util.Uint8ArrayUtils.toHex",ab);function Da(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0};function bb(a,b,c,d,e,f,g,k,l,p,n){this.keySystem=a;this.de=b;this.withCredentials=c;this.Qa=[];this.nd=e||null;this.od=f||null;this.Rd=g==cb;this.Fe=k==db;this.Dd=n||null;d&&this.Qa.push(d)}m("shaka.player.DrmSchemeInfo",bb);var cb=1;bb.DistinctiveIdentifier={Ld:0,Md:cb};var db=1;bb.PersistentState={Ld:0,Md:db};function eb(a){this.body=a;this.headers={}}function fb(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.maxHeight=null}
fb.prototype.clone=function(){var a=new fb;a.maxHeight=this.maxHeight;a.maxWidth=this.maxWidth;a.maxBandwidth=this.maxBandwidth;a.minBandwidth=this.minBandwidth;return a};function gb(){return new bb("","",!1,null)}bb.createUnencrypted=gb;function hb(a,b){a.Qa=ua(a.Qa.concat(b.Qa),function(a){return Array.prototype.join.apply(a.initData)})}bb.combine=hb;bb.prototype.key=function(){return JSON.stringify(this)};function ib(a,b){try{var c=new jb(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}function kb(a){var b=this.mediaKeys;b&&b!=a&&lb(b,null);delete this.mediaKeys;(this.mediaKeys=a)&&lb(a,this);return Promise.resolve()}
function jb(a,b){this.jb=this.keySystem=a;var c=!0;"org.w3.clearkey"==a&&(this.jb="webkit-org.w3.clearkey",c=!1);var d=!1,e;e=document.getElementsByTagName("video");e=e.length?e[0]:document.createElement("video");for(var f=0;f<b.length;++f){var g=b[f],k={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:g.initDataTypes},l=!1;if(g.audioCapabilities)for(var p=0;p<g.audioCapabilities.length;++p){var n=g.audioCapabilities[p];n.contentType&&
(l=!0,e.canPlayType(n.contentType.split(";")[0],this.jb)&&(k.audioCapabilities.push(n),d=!0))}if(g.videoCapabilities)for(p=0;p<g.videoCapabilities.length;++p)n=g.videoCapabilities[p],n.contentType&&(l=!0,e.canPlayType(n.contentType,this.jb)&&(k.videoCapabilities.push(n),d=!0));l||(d=e.canPlayType("video/mp4",this.jb)||e.canPlayType("video/webm",this.jb));"required"==g.persistentState&&(c?k.persistentState="required":d=!1);if(d){this.Pd=k;return}}throw Error("None of the requested configurations were supported.");
}jb.prototype.createMediaKeys=function(){var a=new mb(this.jb);return Promise.resolve(a)};jb.prototype.getConfiguration=function(){return this.Pd};function mb(a){this.Ra=a;this.Ia=null;this.l=new Pa;this.td=[];this.Ed={}}function lb(a,b){a.Ia=b;Qa(a.l);b&&(G(a.l,b,"webkitneedkey",a.Ee.bind(a)),G(a.l,b,"webkitkeymessage",a.De.bind(a)),G(a.l,b,"webkitkeyadded",a.Be.bind(a)),G(a.l,b,"webkitkeyerror",a.Ce.bind(a)))}h=mb.prototype;
h.createSession=function(a){var b=a||"temporary";if("temporary"!=b&&"persistent-license"!=b)throw new TypeError("Session type "+a+" is unsupported on this platform.");a=this.Ia||document.createElement("video");a.src||(a.src="about:blank");b=new nb(a,this.Ra,b);this.td.push(b);return b};h.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."))};h.Ee=function(a){a=D({type:"encrypted",initDataType:"webm",initData:a.initData});this.Ia.dispatchEvent(a)};
h.De=function(a){var b=ob(this,a.sessionId);b&&(a=D({type:"message",messageType:void 0==b.keyStatuses.wa?"licenserequest":"licenserenewal",message:a.message}),b.aa&&(b.aa.resolve(),b.aa=null),b.dispatchEvent(a))};h.Be=function(a){(a=ob(this,a.sessionId))&&a.ready()};h.Ce=function(a){var b=ob(this,a.sessionId);b&&b.handleError(a)};function ob(a,b){var c=a.Ed[b];return c?c:(c=a.td.shift())?(c.sessionId=b,a.Ed[b]=c):null}
function nb(a,b,c){H.call(this,null);this.Ia=a;this.ld=!1;this.T=this.aa=null;this.Ra=b;this.sc=c;this.sessionId="";this.expiration=NaN;this.closed=new I;this.keyStatuses=new pb}q(nb,H);h=nb.prototype;h.ready=function(){qb(this,"usable");this.T&&this.T.resolve();this.T=null};
h.handleError=function(a){var b=Error("EME v0.1b key error");b.errorCode=a.errorCode;b.errorCode.systemCode=a.systemCode;!a.sessionId&&this.aa?(b.method="generateRequest",45==a.systemCode&&(b.message="Unsupported session type."),this.aa.reject(b),this.aa=null):a.sessionId&&this.T?(b.method="update",this.T.reject(b),this.T=null):(b=a.systemCode,a.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?qb(this,"output-not-allowed"):1==b?qb(this,"expired"):qb(this,"internal-error"))};
function rb(a,b,c){if(a.ld)return Promise.reject(Error("The session is already initialized."));a.ld=!0;try{var d;if("persistent-license"==a.sc)if(c)d=Ya("LOAD_SESSION|"+c);else{var e=new Uint8Array(b);d=Ya("PERSISTENT|"+Xa(e))}else d=new Uint8Array(b)}catch(f){return Promise.reject(f)}a.aa=new I;try{a.Ia.webkitGenerateKeyRequest(a.Ra,d)}catch(g){if("InvalidStateError"!=g.name)return a.aa=null,Promise.reject(g);setTimeout(function(){try{this.Ia.webkitGenerateKeyRequest(this.Ra,d)}catch(a){this.aa.reject(a),
this.aa=null}}.bind(a),10)}return a.aa}
h.Wc=function(a,b){if(this.T)this.T.then(this.Wc.bind(this,a,b)).catch(this.Wc.bind(this,a,b));else{this.T=a;var c,d;if("webkit-org.w3.clearkey"==this.Ra){c=Xa(new Uint8Array(b));d=JSON.parse(c);c=d.keys[0].kty;if("A128KW"!=d.keys[0].alg||"oct"!=c)this.T.reject(Error("Response is not a valid JSON Web Key Set.")),this.T=null;c=$a(d.keys[0].k);d=$a(d.keys[0].kid)}else c=new Uint8Array(b),d=null;try{this.Ia.webkitAddKey(this.Ra,c,d,this.sessionId)}catch(e){this.T.reject(e),this.T=null}}};
function qb(a,b){var c=a.keyStatuses;c.size=void 0==b?0:1;c.wa=b;c=D({type:"keystatuseschange"});a.dispatchEvent(c)}h.generateRequest=function(a,b){return rb(this,b,null)};h.load=function(a){return"persistent-license"==this.sc?rb(this,null,a):Promise.reject(Error("Not a persistent session."))};h.update=function(a){var b=new I;this.Wc(b,a);return b};
h.close=function(){if("persistent-license"!=this.sc){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.Ia.webkitCancelKeyRequest(this.Ra,this.sessionId)}this.closed.resolve();return this.closed};h.remove=function(){return"persistent-license"!=this.sc?Promise.reject(Error("Not a persistent session.")):this.close()};function sb(a){this.Kd=a;this.jd=0}
sb.prototype.next=function(){return this.jd>=this.Kd.length?{value:void 0,done:!0}:{value:this.Kd[this.jd++],done:!1}};function pb(){this.size=0;this.wa=void 0}var tb;h=pb.prototype;h.forEach=function(a){this.wa&&a(this.wa)};h.get=function(a){if(this.has(a))return this.wa};h.has=function(a){var b=tb;return this.wa&&Da(new Uint8Array(a),b)?!0:!1};h.keys=function(){var a=tb,b=[];this.wa&&b.push(a);return new sb(b)};h.values=function(){var a=[];this.wa&&a.push(this.wa);return new sb(a)};function ub(){Navigator.prototype.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(tb=Ya("FAKE_KEY_ID"),Navigator.prototype.requestMediaKeySystemAccess=ib,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=kb,window.MediaKeys=mb,window.MediaKeySystemAccess=jb):(Navigator.prototype.requestMediaKeySystemAccess=pa,delete HTMLMediaElement.prototype.mediaKeys,
HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=qa,window.MediaKeys=ra,window.MediaKeySystemAccess=sa))}m("shaka.polyfill.MediaKeys.install",ub);m("shaka.polyfill.installAll",function(){la();na();ub();ta()});function vb(a){this.systemIds=[];this.cencKeyIds=[];a=new wa(new DataView(a.buffer),0);try{for(;a.Pa();){var b=a.i,c=z(a),d=z(a);1==c?c=za(a):0==c&&(c=a.j.byteLength-b);if(1886614376!=d)A(a,c-(a.i-b));else{var e=ya(a);if(1<e)A(a,c-(a.i-b));else{A(a,3);var f=ab(Aa(a)),g=[];if(0<e)for(var k=z(a),l=0;l<k;++l){var p=ab(Aa(a));g.push(p)}var n=z(a);A(a,n);this.cencKeyIds.push.apply(this.cencKeyIds,g);this.systemIds.push(f);a.i!=b+c&&A(a,c-(a.i-b))}}}}catch(y){}};var wb=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function L(a){var b;a instanceof L?(xb(this,a.Ja),this.cb=a.cb,this.ra=a.ra,yb(this,a.tb),this.ja=a.ja,zb(this,a.Va.clone()),this.Oa=a.Oa):a&&(b=String(a).match(wb))?(xb(this,b[1]||"",!0),this.cb=Ab(b[2]||""),this.ra=Ab(b[3]||"",!0),yb(this,b[4]),this.ja=Ab(b[5]||"",!0),zb(this,b[6]||"",!0),this.Oa=Ab(b[7]||"")):this.Va=new Bb(null)}h=L.prototype;h.Ja="";h.cb="";h.ra="";h.tb=null;h.ja="";h.Oa="";
h.toString=function(){var a=[],b=this.Ja;b&&a.push(Cb(b,Db,!0),":");if(b=this.ra){a.push("//");var c=this.cb;c&&a.push(Cb(c,Db,!0),"@");a.push(encodeURIComponent(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));b=this.tb;null!=b&&a.push(":",String(b))}if(b=this.ja)this.ra&&"/"!=b.charAt(0)&&a.push("/"),a.push(Cb(b,"/"==b.charAt(0)?Eb:Fb,!0));(b=this.Va.toString())&&a.push("?",b);(b=this.Oa)&&a.push("#",Cb(b,Gb));return a.join("")};
h.resolve=function(a){var b=this.clone(),c=!!a.Ja;c?xb(b,a.Ja):c=!!a.cb;c?b.cb=a.cb:c=!!a.ra;c?b.ra=a.ra:c=null!=a.tb;var d=a.ja;if(c)yb(b,a.tb);else if(c=!!a.ja){if("/"!=d.charAt(0))if(this.ra&&!this.ja)d="/"+d;else{var e=b.ja.lastIndexOf("/");-1!=e&&(d=b.ja.substr(0,e+1)+d)}if(".."==d||"."==d)d="";else if(-1!=d.indexOf("./")||-1!=d.indexOf("/.")){for(var e=0==d.lastIndexOf("/",0),d=d.split("/"),f=[],g=0;g<d.length;){var k=d[g++];"."==k?e&&g==d.length&&f.push(""):".."==k?((1<f.length||1==f.length&&
""!=f[0])&&f.pop(),e&&g==d.length&&f.push("")):(f.push(k),e=!0)}d=f.join("/")}}c?b.ja=d:c=""!==a.Va.toString();c?zb(b,a.Va.clone()):c=!!a.Oa;c&&(b.Oa=a.Oa);return b};h.clone=function(){return new L(this)};function xb(a,b,c){a.Ja=c?Ab(b,!0):b;a.Ja&&(a.Ja=a.Ja.replace(/:$/,""))}function yb(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.tb=b}else a.tb=null}function zb(a,b,c){b instanceof Bb?a.Va=b:(c||(b=Cb(b,Hb)),a.Va=new Bb(b))}
function Ab(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""}function Cb(a,b,c){return"string"==typeof a?(a=encodeURI(a).replace(b,Ib),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Ib(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Db=/[#\/\?@]/g,Fb=/[\#\?:]/g,Eb=/[\#\?]/g,Hb=/[\#\?@]/g,Gb=/#/g;function Bb(a){this.Ea=a||null}h=Bb.prototype;h.U=null;h.Zb=null;
h.add=function(a,b){if(!this.U&&(this.U={},this.Zb=0,this.Ea))for(var c=this.Ea.split("&"),d=0;d<c.length;d++){var e=c[d].indexOf("="),f=null,g=null;0<=e?(f=c[d].substring(0,e),g=c[d].substring(e+1)):f=c[d];f=decodeURIComponent(f.replace(/\+/g," "));g=g||"";this.add(f,decodeURIComponent(g.replace(/\+/g," ")))}this.Ea=null;(c=this.U.hasOwnProperty(a)&&this.U[a])||(this.U[a]=c=[]);c.push(b);this.Zb++;return this};
h.toString=function(){if(this.Ea)return this.Ea;if(!this.U)return"";var a=[],b;for(b in this.U)for(var c=encodeURIComponent(b),d=this.U[b],e=0;e<d.length;e++){var f=c;""!==d[e]&&(f+="="+encodeURIComponent(d[e]));a.push(f)}return this.Ea=a.join("&")};h.clone=function(){var a=new Bb;a.Ea=this.Ea;if(this.U){var b={},c;for(c in this.U)b[c]=this.U[c].concat();a.U=b;a.Zb=this.Zb}return a};function Jb(){this.id=this.url=null;this.type="static";this.ta=this.Vc=this.e=null;this.F=5;this.ab=this.pa=this.Ic=null;this.Rc=1;this.v=[]}function Kb(){this.o=this.A=this.H=this.e=this.duration=this.start=this.id=null;this.Aa=[]}function Lb(){this.o=this.A=this.H=this.e=this.Z=this.n=this.height=this.width=this.contentType=this.lang=this.id=null;this.qa=[];this.Y=[]}function Mb(){this.value=null}function Nb(){this.contentType=this.lang=this.id=null}
function Ob(){this.o=this.A=this.H=this.e=this.Z=this.n=this.height=this.width=this.bandwidth=this.lang=this.id=null;this.qa=[];this.Gb=!1}function Pb(){this.value=this.schemeIdUri=null;this.children=[];this.pssh=null}function Qb(){this.parsedPssh=this.psshBox=null}function Rb(){this.url=null}function Sb(){this.url=null}function Tb(){this.e=null;this.p=1;this.N=this.Xa=this.Ga=this.w=null}
Tb.prototype.clone=function(){var a=new Tb;a.e=this.e?new L(this.e):null;a.p=this.p;a.w=this.w;a.Ga=M(this.Ga);a.Xa=M(this.Xa);a.N=M(this.N);return a};function Ub(){this.X=this.url=null}Ub.prototype.clone=function(){var a=new Ub;a.url=this.url?new L(this.url):null;a.X=M(this.X);return a};function Vb(){this.X=this.url=null}Vb.prototype.clone=function(){var a=new Vb;a.url=this.url?new L(this.url):null;a.X=M(this.X);return a};
function Wb(){this.e=null;this.p=1;this.q=this.w=null;this.ga=1;this.N=null;this.Za=[]}Wb.prototype.clone=function(){var a=new Wb;a.e=this.e?new L(this.e):null;a.p=this.p;a.w=this.w;a.q=this.q;a.ga=this.ga;a.N=M(this.N);a.Za=this.Za.map(function(a){return a.clone()});return a};function Xb(){this.nb=this.Lb=null}Xb.prototype.clone=function(){var a=new Xb;a.Lb=this.Lb?new L(this.Lb):null;a.nb=M(this.nb);return a};
function Yb(){this.p=1;this.q=this.w=null;this.ga=1;this.xa=this.ib=this.Ha=this.ob=null}Yb.prototype.clone=function(){var a=new Yb;a.p=this.p;a.w=this.w;a.q=this.q;a.ga=this.ga;a.ob=this.ob;a.Ha=this.Ha;a.ib=this.ib;a.xa=M(this.xa);return a};function Zb(){this.qc=[]}Zb.prototype.clone=function(){var a=new Zb;a.qc=this.qc.map(function(a){return a.clone()});return a};function $b(){this.repeat=this.duration=this.startTime=null}
$b.prototype.clone=function(){var a=new $b;a.startTime=this.startTime;a.duration=this.duration;a.repeat=this.repeat;return a};function ac(a,b){this.Ab=a;this.end=b}ac.prototype.clone=function(){return new ac(this.Ab,this.end)};Jb.TAG_NAME="MPD";Kb.TAG_NAME="Period";Lb.TAG_NAME="AdaptationSet";Mb.TAG_NAME="Role";Nb.TAG_NAME="ContentComponent";Ob.TAG_NAME="Representation";Pb.TAG_NAME="ContentProtection";Qb.TAG_NAME="cenc:pssh";Rb.TAG_NAME="BaseURL";Sb.TAG_NAME="Location";Tb.TAG_NAME="SegmentBase";
Ub.TAG_NAME="RepresentationIndex";Vb.TAG_NAME="Initialization";Wb.TAG_NAME="SegmentList";Xb.TAG_NAME="SegmentURL";Yb.TAG_NAME="SegmentTemplate";Zb.TAG_NAME="SegmentTimeline";$b.TAG_NAME="S";
Jb.prototype.parse=function(a,b){this.url=new L(a.e);this.id=N(b,"id",O);this.type=N(b,"type",O)||"static";this.ta=N(b,"mediaPresentationDuration",bc);this.F=N(b,"minBufferTime",bc,this.F);this.Ic=N(b,"minimumUpdatePeriod",bc,this.Ic);this.pa=N(b,"availabilityStartTime",cc,this.pa);this.ab=N(b,"timeShiftBufferDepth",bc,this.ab);this.Rc=N(b,"suggestedPresentationDelay",bc,this.Rc);var c=P(this,b,Rb);this.e=dc(a.e,c?c.url:null);if(c=P(this,b,Sb))this.Vc=dc(a.e,c.url);this.v=ec(this,b,Kb)};
Kb.prototype.parse=function(a,b){this.id=N(b,"id",O);this.start=N(b,"start",bc);this.duration=N(b,"duration",bc);var c=P(this,b,Rb);this.e=dc(a.e,c?c.url:null);this.H=P(this,b,Tb);this.A=P(this,b,Wb);this.o=P(this,b,Yb);this.Aa=ec(this,b,Lb)};
Lb.prototype.parse=function(a,b){var c=P(this,b,Nb)||{},d=P(this,b,Mb);this.id=N(b,"id",O);this.lang=N(b,"lang",O,c.lang);this.contentType=N(b,"contentType",O,c.contentType);this.width=N(b,"width",Q);this.height=N(b,"height",Q);this.n=N(b,"mimeType",O);this.Z=N(b,"codecs",O);this.Gb=d&&"main"==d.value;this.lang&&(this.lang=Ja(this.lang));c=P(this,b,Rb);this.e=dc(a.e,c?c.url:null);this.qa=ec(this,b,Pb);!this.contentType&&this.n&&(this.contentType=this.n.split("/")[0]);this.H=a.H?fc(this,b,a.H):P(this,
b,Tb);this.A=a.A?fc(this,b,a.A):P(this,b,Wb);this.o=a.o?fc(this,b,a.o):P(this,b,Yb);this.Y=ec(this,b,Ob);!this.n&&this.Y.length&&(this.n=this.Y[0].n,!this.contentType&&this.n&&(this.contentType=this.n.split("/")[0]))};Mb.prototype.parse=function(a,b){this.value=N(b,"value",O)};Nb.prototype.parse=function(a,b){this.id=N(b,"id",O);this.lang=N(b,"lang",O);this.contentType=N(b,"contentType",O);this.lang&&(this.lang=Ja(this.lang))};
Ob.prototype.parse=function(a,b){this.id=N(b,"id",O);this.bandwidth=N(b,"bandwidth",Q);this.width=N(b,"width",Q,a.width);this.height=N(b,"height",Q,a.height);this.n=N(b,"mimeType",O,a.n);this.Z=N(b,"codecs",O,a.Z);this.lang=a.lang;var c=P(this,b,Rb);this.e=dc(a.e,c?c.url:null);this.qa=ec(this,b,Pb);this.H=a.H?fc(this,b,a.H):P(this,b,Tb);this.A=a.A?fc(this,b,a.A):P(this,b,Wb);this.o=a.o?fc(this,b,a.o):P(this,b,Yb);0==this.qa.length&&(this.qa=a.qa)};
Pb.prototype.parse=function(a,b){this.schemeIdUri=N(b,"schemeIdUri",O);this.value=N(b,"value",O);this.pssh=P(this,b,Qb);this.children=Array.prototype.slice.call(b.childNodes)};Qb.prototype.parse=function(a,b){var c=gc(b);if(c){this.psshBox=$a(c);try{this.parsedPssh=new vb(this.psshBox)}catch(d){if(!(d instanceof RangeError))throw d;}}};Rb.prototype.parse=function(a,b){this.url=gc(b)};Sb.prototype.parse=function(a,b){this.url=gc(b)};
Tb.prototype.parse=function(a,b){this.e=a.e||this.e;this.p=N(b,"timescale",Q,this.p);this.w=N(b,"presentationTimeOffset",R,this.w);this.Ga=N(b,"indexRange",hc,this.Ga);this.Xa=P(this,b,Ub)||this.Xa;this.N=P(this,b,Vb)||this.N};Ub.prototype.parse=function(a,b){var c=N(b,"sourceURL",O);this.url=dc(a.e,c);this.X=N(b,"range",hc,M(a.Ga))};Vb.prototype.parse=function(a,b){var c=N(b,"sourceURL",O);this.url=dc(a.e,c);this.X=N(b,"range",hc)};
Wb.prototype.parse=function(a,b){this.e=a.e||this.e;this.p=N(b,"timescale",Q,this.p);this.w=N(b,"presentationTimeOffset",R,this.w);this.q=N(b,"duration",Q,this.q);this.ga=N(b,"startNumber",R,this.ga);this.N=P(this,b,Vb)||this.N;this.Za=ec(this,b,Xb)||this.Za};Xb.prototype.parse=function(a,b){var c=N(b,"media",O);this.Lb=dc(a.e,c);this.nb=N(b,"mediaRange",hc)};
Yb.prototype.parse=function(a,b){this.p=N(b,"timescale",Q,this.p);this.w=N(b,"presentationTimeOffset",R,this.w);this.q=N(b,"duration",Q,this.q);this.ga=N(b,"startNumber",R,this.ga);this.ob=N(b,"media",O,this.ob);this.Ha=N(b,"index",O,this.Ha);this.ib=N(b,"initialization",O,this.ib);this.xa=P(this,b,Zb)||this.xa};Zb.prototype.parse=function(a,b){this.qc=ec(this,b,$b)};$b.prototype.parse=function(a,b){this.startTime=N(b,"t",R);this.duration=N(b,"d",R);this.repeat=N(b,"r",R)};
function dc(a,b){var c=b?new L(b):null;return a?c?a.resolve(c):a:c}function fc(a,b,c){var d=M(c);(b=ic(b,c.constructor.TAG_NAME))&&d.parse(a,b);return d}function P(a,b,c){var d=null;if(b=ic(b,c.TAG_NAME))d=new c,d.parse(a,b);return d}function ic(a,b){for(var c=null,d=0;d<a.childNodes.length;d++)if(a.childNodes[d].tagName==b){if(c)return null;c=a.childNodes[d]}return c}
function ec(a,b,c){for(var d=[],e=0;e<b.childNodes.length;e++)if(b.childNodes[e].tagName==c.TAG_NAME){var f=new c;f.parse.call(f,a,b.childNodes[e]);d.push(f)}return d}function gc(a){a=a.firstChild;return a.nodeType!=Node.TEXT_NODE?null:a.nodeValue}function M(a){return a?a.clone():null}function N(a,b,c,d){a=c(a.getAttribute(b));return null!=a?a:void 0!==d?d:null}function cc(a){if(!a)return null;a=Date.parse(a);return isNaN(a)?null:Math.floor(a/1E3)}
function bc(a){if(!a)return null;var b=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(a);if(!b)return null;a=0;var c=R(b[1]);c&&(a+=31536E3*c);(c=R(b[2]))&&(a+=2592E3*c);(c=R(b[3]))&&(a+=86400*c);(c=R(b[4]))&&(a+=3600*c);(c=R(b[5]))&&(a+=60*c);b=window.parseFloat(b[6]);(b=isNaN(b)?null:b)&&(a+=b);return a}
function hc(a){var b=/([0-9]+)-([0-9]+)/.exec(a);if(!b)return null;a=R(b[1]);if(null==a)return null;b=R(b[2]);return null==b?null:new ac(a,b)}function Q(a){a=window.parseInt(a,10);return 0<a?a:null}function R(a){a=window.parseInt(a,10);return 0<=a?a:null}function O(a){return a};function jc(a,b,c){for(var d=a.o,e=[],f=0;f<c;++f){var g=f+b,k=(g-1)*d.q,l=k/d.p,k=(k+d.q)/d.p,g=kc(a,g-1+d.ga,(g-1)*d.q);if(!g)return null;e.push(new S(l,k,0,null,new L(g)))}return e}function kc(a,b,c){if(!a.o)return null;var d=a.o.ob;return d?(b=lc(d,a.id,b,a.bandwidth,c))?a.e?a.e.resolve(b):b:null:a.e?new L(a.e):null}
function lc(a,b,c,d,e){var f={RepresentationID:b,Number:c,Bandwidth:d,Time:e};a=a.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(a,b,c){if("$$"==a)return"$";var d=f[b];if(null==d)return a;"RepresentationID"==b&&c&&(c=void 0);a=d.toString();c=window.parseInt(c,10)||1;c=Math.max(0,c-a.length);return Array(c+1).join("0")+a});try{return new L(a)}catch(g){if(g instanceof URIError)return null;throw g;}};function S(a,b,c,d,e){this.startTime=a;this.endTime=b;this.$a=c;this.Eb=d;this.url=e}function mc(a,b,c){return new S(b,c,a.$a,a.Eb,a.url)}function nc(a,b){for(var c=a.length-1;0<=c;--c){var d=a[c];if(b>=d.startTime&&(null==d.endTime||b<d.endTime))return c}return-1}function oc(a,b){return a.map(function(a){return mc(a,a.startTime+b,null!=a.endTime?a.endTime+b:null)})};function pc(){}pc.prototype.parse=function(a,b,c){var d=null;try{d=this.Nc(a,b,c)}catch(e){if(!(e instanceof RangeError))throw e;}return d};
pc.prototype.Nc=function(a,b,c){var d=[];a=new wa(a,0);var e=z(a);if(1936286840!=z(a))return null;1==e&&(e=za(a));var f=ya(a);A(a,3);A(a,4);var g=z(a);if(0==g)return null;var k,l;0==f?(k=z(a),l=z(a)):(k=za(a),l=za(a));A(a,2);f=a.j.getUint16(a.i,a.Gc);a.i+=2;b=b+e+l;for(e=0;e<f;e++){var p=z(a);l=(p&2147483648)>>>31;var p=p&2147483647,n=z(a);z(a);if(1==l)return null;d.push(new S(k/g,(k+n)/g,b,b+p-1,c));k+=n;b+=p}return d};function T(a){this.g=a;this.na=0}T.prototype.destroy=function(){this.g=null};h=T.prototype;h.length=function(){return this.g.length};h.first=function(){if(0==this.g.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return this.g[0]};function U(a){if(0==a.g.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return a.g[a.g.length-1]}
h.get=function(a){if(0>a||a>=this.g.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.g[a]};h.find=function(a){a=nc(this.g,a);return 0<=a?this.g[a]:null};h.Ec=function(a){qc(this,a);return!0};
function qc(a,b){a.na!=b.na&&(b=new T(oc(b.g,a.na-b.na)));if(0==a.length())a.g=b.g.slice(0);else if(0!=b.length()&&null!=U(a).endTime&&!(null!=U(b).endTime&&U(b).endTime<U(a).endTime)){if(U(a).endTime<=b.first().startTime)var c=mc(U(a),U(a).startTime,b.first().startTime),c=a.g.slice(0,-1).concat([c]);else{var d;for(d=0;d<a.g.length&&!(a.g[d].endTime>=b.first().startTime);++d);a.g[d].startTime<b.first().startTime?(c=mc(a.g[d],a.g[d].startTime,b.first().startTime),c=a.g.slice(0,d).concat([c])):(a.first().startTime>
b.first().startTime||b.first(),c=a.g.slice(0,d))}a.g=c.concat(b.g)}}h.Ba=function(a){var b=a-this.na;if(0==b)return 0;this.g=oc(this.g,b);this.na=a;return b};h.Dc=function(){return 0<this.length()?{start:this.first().startTime,end:U(this).endTime}:{start:0,end:0}};function V(a,b,c,d){T.call(this,a);this.Sa=b;this.zd=c;this.Hb=d;this.ka=this.sb=this.R=null;rc(this)}q(V,T);V.prototype.destroy=function(){this.zd=this.Sa=null;T.prototype.destroy.call(this)};V.prototype.find=function(a){sc(this,r()/1E3);return T.prototype.find.call(this,a)};V.prototype.Ec=function(a){qc(this,a);null==this.R&&rc(this);return!0};
function rc(a){if(0!=a.length()){a.length();var b=null!=U(a).endTime?U(a).endTime:U(a).startTime;if(a.Sa.pa>a.Hb)a.R=b;else{var c=a.Hb-(a.Sa.pa+a.zd.start);0>c?a.R=b:c<Math.max(U(a).startTime,U(a).endTime||0)?(U(a),a.R=b):a.R=c}a.sb=U(a).startTime;a.ka=a.first().startTime}}V.prototype.Ba=function(a){a=T.prototype.Ba.call(this,a);null!=this.R&&(this.sb+=a,this.ka+=a,this.sb>this.R&&(this.R+=a));return a};V.prototype.Dc=function(){return tc(this,r()/1E3)};
function tc(a,b){sc(a,b);if(null==a.R||null==a.sb||null==a.ka)return{start:0,end:0};var c=b-a.Hb,d=a.R+c;null!=a.Sa.ab&&(d=d-a.ka-a.Sa.ab,0<d&&(a.ka+=d));c=a.sb+c;c=0<a.length()?null!=U(a).endTime?Math.min(c,U(a).endTime):c:a.ka;c=Math.max(c,a.ka);return{start:a.ka,end:c}}
function sc(a,b){if(null!=a.Sa.ab)if(null==a.R)a.length();else{for(var c=a.R+(b-a.Hb),d=0,e=0;e<a.g.length;++e){var f=null;e<a.g.length-1?f=a.g[e+1].endTime:(f=a.g[e],f=null!=f.endTime?f.endTime+(f.endTime-f.startTime):null);if(null!=f&&f<c-a.Sa.ab)++d;else break}0<d&&a.g.splice(0,d)}};function uc(a,b,c,d){var e=1,f=0,g;if(a.pa>d)g=null;else{var k=a.Rc||0,l=a.ab||0;g=c.o;g=g.q/g.p;var p=d-(a.pa+b.start);0>p?g=null:(l=p-2*g-l,0>l&&(l=0),l=Math.ceil(l/g)*g,p-=g,0>p?g=null:(k=Math.floor(p/g)*g-k,0>k&&(k=0),k=Math.floor(k/g)*g,g={cd:l/g+1,current:(k>=l?k:l)/g+1}))}g&&(e=g.cd,f=g.current-g.cd+1);e=jc(c,e,f);if(null==e)throw a=Error("Failed to generate SegmentReferences."),a.type="stream",a;V.call(this,e,a,b,d);this.G=c;this.rb=this.V=0<this.length()?a.pa+b.start+U(this).endTime:null;
this.qb=g?g.current+1:null}q(uc,V);uc.prototype.destroy=function(){this.G=null;V.prototype.destroy.call(this)};uc.prototype.find=function(a){var b=r()/1E3;vc(this,b);sc(this,b);return T.prototype.find.call(this,a)};uc.prototype.Ec=function(a){if(null!=this.V||!(a instanceof uc)||null==a.V)return!1;this.V=a.V;this.rb=a.rb;this.qb=a.qb;qc(this,a);vc(this,r()/1E3);rc(this);return!0};uc.prototype.Ba=function(a){a=V.prototype.Ba.call(this,a);null!=this.V&&(this.V+=a,this.rb+=a);return a};
uc.prototype.Dc=function(){var a=r()/1E3;vc(this,a);return tc(this,a)};function vc(a,b){if(null!=a.V&&null!=a.rb&&null!=a.qb){var c=a.G.o,c=c.q/c.p,d=Math.floor((a.rb+(b-a.Hb)-a.V)/c);if(0!=d){var e=jc(a.G,a.qb,d);Array.prototype.push.apply(a.g,oc(e,a.na));a.V+=d*c;a.qb+=d}}};function wc(a,b,c,d){this.Q=a;this.da=b;this.G=c;this.Ib=d;this.b=null}wc.prototype.destroy=function(){this.G=this.da=this.Q=null;this.b&&(this.b.destroy(),this.b=null)};
wc.prototype.create=function(){if(this.b)return Promise.resolve(this.b);if("dynamic"==this.Q.type)try{this.b=new uc(this.Q,this.da,this.G,this.Ib)}catch(a){return Promise.reject(a)}else{var b=this.G.o,b=jc(this.G,1,Math.ceil(this.da.duration/(b.q/b.p)));if(!b)return b=Error("Failed to generate SegmentReferences"),b.type="stream",Promise.reject(b);this.b=new T(b)}return Promise.resolve(this.b)};function xc(a,b,c){this.Q=a;this.da=b;this.G=c;this.b=null}xc.prototype.destroy=function(){this.G=this.da=this.Q=null;this.b&&(this.b.destroy(),this.b=null)};xc.prototype.create=function(){if(this.b)return Promise.resolve(this.b);for(var a=this.G.A,b=0,c=[],d=0;d<a.Za.length;++d){var e=a.Za[d],b=0==d?0:b,f=null,g=null,k=b/a.p;a.q&&(f=b+a.q,g=f/a.p);var b=f,f=0,l=null;e.nb&&(f=e.nb.Ab,l=e.nb.end);c.push(new S(k,g,f,l,new L(e.Lb)))}this.b=new T(c);return Promise.resolve(this.b)};function yc(a,b,c,d){this.Q=a;this.da=b;this.G=c;this.Ib=d;this.b=null}yc.prototype.destroy=function(){this.G=this.da=this.Q=null;this.b&&(this.b.destroy(),this.b=null)};
yc.prototype.create=function(){if(this.b)return Promise.resolve(this.b);for(var a=this.G.o,b=a.xa.qc,c=0,d=[],e=0;e<b.length&&b[e].duration;++e)for(var f=null!=b[e].startTime?b[e].startTime:c,g=b[e].repeat||0,k=0;k<=g;++k){var l=f+b[e].duration;0<d.length&&f!=c&&(d[d.length-1].end=f);d.push({start:f,end:l});c=f=l}b=[];for(c=0;c<d.length;++c){g=d[c].start;e=g/a.p;f=d[c].end/a.p;g=kc(this.G,c+a.ga,g);if(!g)return a=Error("Failed to generate media URL."),a.type="dash",Promise.reject(a);b.push(new S(e,
f,0,null,new L(g)))}this.b="dynamic"==this.Q.type?new V(b,this.Q,this.da,this.Ib):new T(b);return Promise.resolve(this.b)};function zc(a){this.Ue=a;this.b=null}zc.prototype.destroy=function(){this.b&&(this.b.destroy(),this.b=null)};zc.prototype.create=function(){if(this.b)return Promise.resolve(this.b);var a=new S(0,null,0,null,this.Ue);this.b=new T([a]);return Promise.resolve(this.b)};function Ac(){}Ac.prototype.parse=function(a,b,c){var d=null;try{d=this.Nc(a,b,c)}catch(e){if(!(e instanceof RangeError))throw e;}return d};
Ac.prototype.Nc=function(a,b,c){b=new B(b);if(440786851!=C(b).id)b=null;else{var d=C(b);if(408125543!=d.id)b=null;else{b=d.j.byteOffset;for(var d=new B(d.j),e=null;d.Pa();){var f=C(d);if(357149030==f.id){e=f;break}}if(e){d=new B(e.j);for(e=1E6;d.Pa();)if(f=C(d),2807729==f.id){e=Fa(f);break}d=e/1E9}else d=null;b=d?{Ke:b,Ve:d}:null}}if(!b)return null;e=C(new B(a));if(475249515!=e.id)return null;a=b.Ke;b=b.Ve;for(var d=[],e=new B(e.j),g=f=-1;e.Pa();){var k=C(e);if(187==k.id){var l;l=new B(k.j);k=C(l);
if(179!=k.id)l=null;else if(k=Fa(k),l=C(l),183!=l.id)l=null;else{l=new B(l.j);for(var p=0;l.Pa();){var n=C(l);if(241==n.id){p=Fa(n);break}}l={Xe:k,Ge:p}}l&&(k=b*l.Xe,l=a+l.Ge,0<=f&&d.push(new S(f,k,g,l-1,c)),f=k,g=l)}}0<=f&&d.push(new S(f,null,g,null,c));return d};function Bc(a){this.url=a;this.h=new Cc;this.Pb=this.Hd=this.wc=0;this.m=null;this.B=new I;this.L=null}function Cc(){this.body=null;this.Jb=1;this.$c=1E3;this.Ie=2;this.Je=.5;this.gc=0;this.method="GET";this.responseType="arraybuffer";this.fc={};this.Id=this.withCredentials=!1}function Dc(a){Ec(a);a.h.body=null;a.B=null;a.L=null}function Ec(a){a.m&&(a.m.onload=null,a.m.onreadystatechange=null,a.m.onerror=null,a.m.ontimeout=null);a.m=null}h=Bc.prototype;
h.mc=function(){if(this.m)return this.B;if(0==this.url.lastIndexOf("data:",0)){var a=this.url.split(":")[1].split(";").pop().split(","),b=a.pop(),b="base64"==a.pop()?window.atob(b.replace(/-/g,"+").replace(/_/g,"/")):window.decodeURIComponent(b);"arraybuffer"==this.h.responseType&&(b=Ya(b).buffer);a=JSON.parse(JSON.stringify(new XMLHttpRequest));a.response=b;a.responseText=b.toString();b=this.B;b.resolve(a);Dc(this);return b}if(0==this.url.lastIndexOf("idb:",0))return Fc(this);this.wc++;this.Hd=Date.now();
this.Pb||(this.Pb=this.h.$c);this.m=new XMLHttpRequest;a=this.url;this.L&&!this.L.supportsCaching()&&(a=new L(a),a.Va.add("_",Date.now()),a=a.toString());this.m.open(this.h.method,a,!0);this.m.responseType=this.h.responseType;this.m.timeout=this.h.gc;this.m.withCredentials=this.h.withCredentials;this.m.onload=this.me.bind(this);this.h.Id&&(this.m.onreadystatechange=this.pe.bind(this));this.m.onerror=this.Lc.bind(this);this.m.ontimeout=this.we.bind(this);for(b in this.h.fc)this.m.setRequestHeader(b,
this.h.fc[b]);this.m.send(this.h.body);return this.B};function Fc(a){var b=a.url.split("/"),c=parseInt(b[2],10),d=parseInt(b[3],10),e=new Gc(null,null);return Hc(e).then(function(){return Ic(e,c,d)}).then(J(a,function(a){var b=JSON.parse(JSON.stringify(new XMLHttpRequest));b.response=a;a=this.B;a.resolve(b);W(e);Dc(this);return a})).catch(J(a,function(a){W(e);Dc(this);return Promise.reject(a)}))}
function Jc(a,b,c){b=Error(b);b.type=c;b.status=a.m.status;b.url=a.url;b.method=a.h.method;b.body=a.h.body;b.Ye=a.m;return b}h.abort=function(){if(this.m&&this.m.readyState!=XMLHttpRequest.DONE){this.m.abort();var a=Jc(this,"Request aborted.","aborted");this.B.reject(a);Dc(this)}};h.me=function(a){this.L&&this.L.sample(Date.now()-this.Hd,a.loaded);200<=this.m.status&&299>=this.m.status?(this.B.resolve(this.m),Dc(this)):this.wc<this.h.Jb?Kc(this):(a=Jc(this,"HTTP error.","net"),this.B.reject(a),Dc(this))};
h.pe=function(){if(this.m.readyState==XMLHttpRequest.HEADERS_RECEIVED){var a=Date.parse(this.m.getResponseHeader("Date"));a&&(va=a-Date.now())}};h.Lc=function(){var a=Jc(this,"Network failure.","net");this.B.reject(a);Dc(this)};h.we=function(){if(this.wc<this.h.Jb)Kc(this);else{var a=Jc(this,"Request timmedout.","net");this.B.reject(a);Dc(this)}};function Kc(a){Ec(a);window.setTimeout(a.mc.bind(a),a.Pb*(1+(2*Math.random()-1)*a.h.Je));a.Pb*=a.h.Ie};function Lc(a){Bc.call(this,a);this.h.responseType="text";this.h.Jb=3;this.h.gc=Mc;this.h.Id=!0}q(Lc,Bc);var Mc=0;Lc.prototype.send=function(){var a=this.url;return this.mc().then(function(b){b=b.responseText;if(b=(new DOMParser).parseFromString(b,"text/xml")){var c={e:new L(a)};b=P(c,b,Jb)}else b=null;if(b)return Promise.resolve(b);b=Error("MPD parse failure.");b.type="mpd";return Promise.reject(b)})};function Nc(a,b,c,d){Bc.call(this,a);this.h.body=b;this.h.method="POST";this.h.Jb=3;this.h.withCredentials=c;this.h.gc=Oc;a=d||{};for(var e in a)this.h.fc[e]=a[e]}q(Nc,Bc);var Oc=0;Nc.prototype.send=function(){return this.mc().then(function(a){return Promise.resolve(new Uint8Array(a.response))})};function Pc(a,b,c,d,e){Bc.call(this,a);if(b||c)this.h.fc.Range="bytes="+(b+"-"+(null!=c?c:""));d&&(this.h.Jb=d);e&&(this.h.$c=e);this.h.gc=Qc}q(Pc,Bc);var Qc=0;Pc.prototype.send=function(){return this.mc().then(J(this,function(a){return Promise.resolve(a.response)}))};function Rc(a,b,c){this.url=a;this.$a=b;this.Eb=c;this.ub=this.Ya=null}Rc.prototype.Fb=function(){if(this.ub)return this.ub;this.Ya=new Pc(this.url.toString(),this.$a,this.Eb);var a=this.Ya.send().then(J(this,function(a){this.Ya=null;return Promise.resolve(a)}));return this.ub=a=a.catch(J(this,function(a){this.ub=this.Ya=null;return Promise.reject(a)}))};function Sc(a){a.Ya&&(a.Ya.abort(),a.Ya=null,a.ub=null)};function Tc(a,b,c,d,e,f){this.Q=a;this.da=b;this.Yb=c;this.hb=d;this.cc=e;this.Ib=f;this.b=this.B=null}Tc.prototype.destroy=function(){this.da=this.Q=null;Sc(this.hb);this.hb=null;this.cc&&(Sc(this.cc),this.cc=null);this.b&&(this.b.destroy(),this.b=null);this.B=null};
Tc.prototype.create=function(){if(this.B)return this.B;var a=[this.hb.Fb()];"webm"==this.Yb&&a.push(this.cc.Fb());return this.B=Promise.all(a).then(J(this,function(a){var c=a[0];a=a[1]||null;var d=null;"mp4"==this.Yb?(d=new pc,d=d.parse(new DataView(c),this.hb.$a,this.hb.url)):"webm"==this.Yb&&(d=new Ac,d=d.parse(new DataView(c),new DataView(a),this.hb.url));if(!d)return c=Error("Failed to parse segment references from",this.Yb,"container."),c.type="stream",Promise.reject(c);c="dynamic"==this.Q.type?
new V(d,this.Q,this.da,this.Ib):new T(d);return Promise.resolve(c)}))};function Uc(a){this.Mb=a}Uc.prototype.destroy=function(){this.Mb&&(Sc(this.Mb),this.Mb=null)};Uc.prototype.create=function(){return this.Mb?this.Mb.Fb():Promise.resolve(null)};function Vc(a,b,c){this.qd=a;this.va=b;this.P=c;this.l=new Pa;this.ba=[];this.ya=0;this.Ta=this.C=null;G(this.l,this.va,"updateend",this.te.bind(this))}var Wc=1/60;Vc.prototype.destroy=function(){this.abort();this.ba=this.C=this.Ta=null;this.l.destroy();this.qd=this.va=this.l=null};function Xc(a,b){for(var c=a.va.buffered,d=0;d<c.length;++d){var e=c.start(d)-Wc,f=c.end(d)+Wc;if(b>=e&&b<=f)return c.end(d)-b}return 0}h=Vc.prototype;
h.Fb=function(a,b){if(this.C){var c=Error("Cannot fetch: previous operation not complete.");c.type="stream";return Promise.reject(c)}this.C=new Ua;b&&this.C.append(function(){return[Yc(this,b),this.uc.bind(this)]}.bind(this));this.C.append(function(){var b=new Pc(a.url.toString(),a.$a,a.Eb,3,1E3*(a.endTime?a.endTime-a.startTime:1));b.L=this.P;return[b.send(),b.abort.bind(b)]}.bind(this));this.C.append(function(a){this.P.getBandwidth();return[Yc(this,a),this.uc.bind(this)]}.bind(this));var d=0==this.va.buffered.length&&
0==this.ba.length,e=null;this.C.append(function(){if(d){var b=a.startTime;e=this.va.buffered.start(0)-b}b=nc(this.ba,a.startTime);0<=b?this.ba.splice(b+1,0,a):this.ba.push(a)}.bind(this));return Zc(this).then(function(){return Promise.resolve(e)}.bind(this))};
h.clear=function(){if(this.C){var a=Error("Cannot clear: previous operation not complete.");a.type="stream";return Promise.reject(a)}this.C=new Ua;this.C.append(function(){var a;a:if(0==this.va.buffered.length)a=Promise.resolve();else{try{this.va.remove(0,Number.POSITIVE_INFINITY)}catch(c){a=Promise.reject(c);break a}this.ba=[];a=this.Ta=new I}return[a,this.uc.bind(this)]}.bind(this));return Zc(this)};h.abort=function(){return this.C?this.C.abort():Promise.resolve()};
h.Ba=function(a){var b=a-this.ya;0!=b&&(this.ba=oc(this.ba,b),this.ya=a)};function Zc(a){a.C.start();return a.C.Tc.then(function(){this.C=null}.bind(a)).catch(function(a){this.C=null;return Promise.reject(a)}.bind(a))}function Yc(a,b){try{a.va.appendBuffer(b)}catch(c){return Promise.reject(c)}a.Ta=new I;return a.Ta}h.uc=function(){"open"==this.qd.readyState&&this.va.abort()};h.te=function(){this.Ta.resolve();this.Ta=null};function $c(){this.K=ad++;this.id=this.I=this.O=null;this.timestampOffset=0;this.height=this.width=this.bandwidth=null;this.Z=this.n="";this.enabled=!0}var ad=0;$c.prototype.destroy=function(){this.O&&(this.O.destroy(),this.O=null);this.I&&(this.I.destroy(),this.I=null)};function bd(a){var b=a.n||"";a.Z&&(b+='; codecs="'+a.Z+'"');return b}function cd(){this.K=dd++;this.id=null;this.contentType="";this.f=[];this.Ma=[];this.lang="";this.Gb=!1}var dd=0;
cd.prototype.destroy=function(){for(var a=0;a<this.f.length;++a)this.f[a].destroy();this.Ma=this.f=null};cd.prototype.Bc=function(){for(var a=[],b=0;b<this.Ma.length;++b){var c=new fd;c.id=this.K;c.$=this.Ma[b];c.contentType=this.contentType;c.Fa=this.f.length?bd(this.f[0]):"";a.push(c)}return a};function gd(){this.id=null;this.start=0;this.duration=null;this.u=[]}gd.prototype.Bc=function(){for(var a=[],b=0;b<this.u.length;++b)a.push.apply(a,this.u[b].Bc());return a};
gd.prototype.destroy=function(){for(var a=0;a<this.u.length;++a)this.u[a].destroy();this.u=null};function hd(){this.ia=!1;this.Ub=this.yb=null;this.F=0;this.t=[]}hd.prototype.destroy=function(){for(var a=0;a<this.t.length;++a)this.t[a].destroy();this.t=null};function fd(){this.id=0;this.$=null;this.Fa=this.contentType=""};function id(a){this.kb=a}
id.prototype.Ua=function(a){for(var b=r()/1E3,c=0;c<a.v.length;++c)for(var d=a.v[c],e=0;e<d.Aa.length;++e){var f=d.Aa[e];if("text"!=f.contentType)for(var g=0;g<f.Y.length;++g){var k=f.Y[g],l=0,l=l+(k.H?1:0),l=l+(k.A?1:0),l=l+(k.o?1:0);0==l?(f.Y.splice(g,1),--g):1!=l&&(k.H?(k.A=null,k.o=null):k.A&&(k.o=null))}}jd(a);for(c=0;c<a.v.length;++c)for(d=a.v[c],e=0;e<d.Aa.length;++e){g=f=d.Aa[e];k=null;for(l=0;l<g.Y.length;++l){var p=g.Y[l].n||"";k?p!=k&&(g.Y.splice(l,1),--l):k=p}0==f.Y.length&&(d.Aa.splice(e,
1),--e)}"dynamic"==a.type&&null==a.pa&&(a.pa=b);c=new hd;"dynamic"==a.type&&(c.ia=!0,c.yb=a.Ic,c.Ub=a.Vc?new L(a.Vc):new L(a.url));c.F=a.F||5;for(d=0;d<a.v.length;++d){e=a.v[d];if(null==e.start)break;f=new gd;f.id=e.id;f.start=e.start||0;f.duration=e.duration;for(g=0;g<e.Aa.length;++g){k=e.Aa[g];l=new cd;l.id=k.id;l.Gb=k.Gb;l.contentType=k.contentType||"";l.lang=k.lang||"";for(p=0;p<k.Y.length;++p){var n=k.Y[p],y=l.Ma.slice(0),w=y,x;x=n;var v=[];if(0==x.qa.length)v.push(gb());else if(this.kb)for(var t=
0;t<x.qa.length;++t){var s=this.kb(x.qa[t]);s&&v.push(s)}x=v;if(0==w.length)Array.prototype.push.apply(w,x);else for(v=0;v<w.length;++v){t=!1;for(s=0;s<x.length;++s)if(w[v].key()==x[s].key()){t=!0;break}t||(w.splice(v,1),--v)}if(!(0==y.length&&0<l.Ma.length)){x=a;w=e;v=b;if(n.e){var t=null,s=1,u=0;if(n.H)t=n.n.split("/")[1],"mp4"!=t&&"webm"!=t?t=null:(s=n.H,"webm"!=t||s.N?s.Ga||s.Xa&&s.Xa.X?(u=s.Xa,u||(u=new Ub,u.url=new L(n.e),u.X=s.Ga?s.Ga.clone():null),u=kd(u),s=s.N?kd(s.N):null,w=new Tc(x,w,t,
u,s,v),x=new Uc(s),v=new $c,v.O=w,v.I=x,t=v):t=null:t=null),s=n.H.p,u=n.H.w;else if(n.A)v=n.A,!v.q&&1<v.Za.length?t=null:(v=v.N?kd(v.N):null,w=new xc(x,w,n),x=new Uc(v),v=new $c,v.O=w,v.I=x,t=v),s=n.A.p,u=n.A.w;else if(n.o){b:if(t=n.o,s=t,u=0,u+=s.Ha?1:0,u+=s.xa?1:0,u+=s.q?1:0,0==u?s=!1:(1!=u&&(s.Ha?(s.xa=null,s.q=null):s.xa&&(s.q=null)),s=!0),s){s=null;if(t.ib&&(s=(t=n.o.ib)?ld(n,t,Vb):null,!s)){t=null;break b}t=s?kd(s):null;var u=n,s=t,K=u.o;if(K.Ha){K=void 0;K=u.n.split("/")[1];if("mp4"!=K&&"webm"!=
K)K=null;else if("webm"==K&&!s||!kc(u,1,0))K=null;else{var ed=u.o.Ha;(u=ed?ld(u,ed,Ub):null)?(u=kd(u),K=new Tc(x,w,K,u,s,v)):K=null}w=K}else w=K.ob?K.xa?new yc(x,w,u,v):K.q?"dynamic"!=x.type&&null==w.duration?null:new wc(x,w,u,v):void 0:null;w?(x=new Uc(t),v=new $c,v.O=w,v.I=x,t=v):t=null}else t=null;s=n.o.p;u=n.o.w}else"text"==n.n.split("/")[0]&&(t=new $c,t.O=new zc(new L(n.e)));t?(t.id=n.id,u&&(t.timestampOffset=-1*u/s),t.bandwidth=n.bandwidth,t.width=n.width,t.height=n.height,t.n=n.n||"",t.Z=n.Z||
"",n=t):n=null}else n=null;n&&(l.f.push(n),l.Ma=y)}}f.u.push(l)}c.t.push(f)}return c};
function jd(a){if(a.v.length){null==a.v[0].start&&(a.v[0].start=0);var b=function(a){return 0==a||!!a};"dynamic"==a.type&&(a.ta=null);b(a.ta)&&1==a.v.length&&!b(a.v[0].duration)&&(a.v[0].duration=a.ta);for(var c=0,d=!0,e=0;e<a.v.length;++e){var f=a.v[e-1],g=a.v[e],k=a.v[e+1]||{start:a.ta};!b(g.start)&&f&&b(f.start)&&b(f.duration)&&(g.start=f.start+f.duration);!b(g.duration)&&b(k.start)&&(g.duration=k.start-g.start);null!=g.start&&null!=g.duration?c+=g.duration:d=!1}b(a.ta)||(e=a.v[a.v.length-1],d?
a.ta=c:b(e.start)&&b(e.duration)?a.ta=e.start+e.duration:"dynamic"!=a.type&&(a.ta=c))}}function ld(a,b,c){b=lc(b,a.id,null,a.bandwidth,null);if(!b)return null;c=new c;c.url=a.e&&b?a.e.resolve(b):b;return c}function kd(a){var b=new L(a.url),c=0,d=null;a.X&&(c=a.X.Ab,d=a.X.end);return new Rc(b,c,d)};function md(a,b,c){H.call(this,a);this.a=b;this.c=c;this.D=this.mb=null;this.l=new Pa;this.Nb={};this.wb=[];this.ud=0;this.eb=new I;this.Xc=null}q(md,H);md.prototype.destroy=function(){this.parent=null;for(var a=0;a<this.wb.length;++a)this.wb[a].close().catch(function(){});this.wb=[];this.Nb=this.D=this.mb=null;this.l.destroy();this.a=this.c=this.l=null};
function nd(a){for(var b=new F,c=a.c.dd(),d=0;d<c.length;++d){var e=c[d];e.$.keySystem||e.Fa&&!od(e.Fa)||b.push(e.contentType,e)}for(var d={},e=!1,f=0;f<c.length;++f){var g=c[f];if(g.$.keySystem&&!b.has(g.contentType)){var k=g.$.keySystem,l=d[k];l||(l=g.$,l={audioCapabilities:void 0,videoCapabilities:void 0,initDataTypes:void 0,distinctiveIdentifier:l.Rd?"required":"optional",persistentState:l.Fe||a.c.ec()?"required":"optional"},d[k]=l);g.Fa&&(k=g.contentType+"Capabilities",k in l&&(e=!0,l[k]||(l[k]=
[]),l[k].push({contentType:g.Fa,robustness:g.$[g.contentType+"Robustness"]})))}}if(!e)if(c.length)a.D=c[0].$;else throw a=Error("No DRM scheme info provided!"),a.type="drm",a;if(0==Object.keys(d).length)return a.c.Pc(b),a.eb.resolve(),Promise.resolve();e=new I;d=pd(d,e);d=d.then(a.Od.bind(a,c,b));d=d.then(a.Se.bind(a));e.reject(null);return d}
function qd(a,b){null==a.Xc&&(a.Xc=window.setTimeout(function(){var a=Error("Timeout waiting for sessions.");a.type="storage";this.eb.reject(a)}.bind(a),b));return a.eb}function pd(a,b){for(var c in a){var d=a[c];b=b.catch(function(){return navigator.requestMediaKeySystemAccess(c,[d])})}return b}h=md.prototype;
h.Od=function(a,b,c){for(var d=c.keySystem,e=c.getConfiguration(),f=["audio","video"],g=0;g<f.length;++g){var k=f[g];if(!b.has(k)){var l=e[k+"Capabilities"];if(l&&l.length){for(var l=l[0],p=[],n=0;n<a.length;++n){var y=a[n];y.$.keySystem==d&&y.Fa==l.contentType&&(p.push(y),this.D?hb(this.D,y.$):this.D=y.$)}b.set(k,p)}}}this.c.Pc(b);return c.createMediaKeys()};
h.Se=function(a){this.mb=a;return this.a.setMediaKeys(this.mb).then(J(this,function(){return this.D.Dd?this.mb.setServerCertificate(this.D.Dd):Promise.resolve()})).then(J(this,function(){if(0<this.c.ac().length)rd(this);else{for(var a=0;a<this.D.Qa.length;++a){var c=this.D.Qa[a];this.vd({type:"encrypted",initDataType:c.initDataType,initData:c.initData})}0==this.D.Qa.length&&G(this.l,this.a,"encrypted",this.vd.bind(this))}}))};
h.vd=function(a){var b=new Uint8Array(a.initData),c=Array.prototype.join.apply(b);if(!this.Nb[c]){try{var d=sd(this)}catch(e){d=E(e);this.dispatchEvent(d);this.eb.reject(e);return}a=d.generateRequest(a.initDataType,a.initData);this.Nb[c]=!0;a.catch(J(this,function(a){if(this.Nb){this.Nb[c]=!1;var b=E(a);this.dispatchEvent(b);this.eb.reject(a)}}));this.wb.push(d)}};
function rd(a){for(var b=a.c.ac(),c=0;c<b.length;++c){var d=sd(a),e=d.load(b[c]);a.wb.push(d);e.catch(J(a,function(a){a=E(a);this.dispatchEvent(a)}))}}function sd(a){var b=a.c.ec()?a.mb.createSession("persistent-license"):a.mb.createSession();G(a.l,b,"message",a.re.bind(a));G(a.l,b,"keystatuseschange",a.le.bind(a));return b}h.re=function(a){td(this,a.target,this.D,a.message)};
h.le=function(a){var b=a.target.keyStatuses.values();for(a=b.next();!a.done;a=b.next()){var c=ud[a.value];c&&(c=Error(c),c.type=a.value,a=E(c),this.dispatchEvent(a))}};
function td(a,b,c,d){d=new eb(d);c.od&&c.od(d);(new Nc(c.de,d.body,c.withCredentials,d.headers)).send().then(J(a,function(a){c.nd&&(a=c.nd(a));return b.update(a)})).then(J(a,function(){var a=D({type:"sessionReady",detail:b});this.dispatchEvent(a);this.ud++;this.ud>=this.wb.length&&this.eb.resolve()})).catch(J(a,function(a){a.$e=b;a=E(a);this.dispatchEvent(a)}))}
var ud={"output-not-allowed":"The required output protection is not available.",expired:"A required key has expired and the content cannot be decrypted.","internal-error":"An unknown error has occurred in the CDM."};function vd(a,b,c,d,e){H.call(this,a);this.a=b;this.ea=new Vc(c,d,e);this.P=e;this.kd=this.b=this.S=null;this.rd=0;this.Sc=!1;this.ha=null;this.Ob=!1;this.ya=null;this.Jc=this.$b=this.la=!1}q(vd,H);var wd=15;vd.prototype.destroy=function(){this.Xb();this.P=this.S=null;this.ea.destroy();this.parent=this.a=this.ea=null};h=vd.prototype;h.hd=function(){return this.la};h.gd=function(){return this.$b};
h.Tb=function(a,b,c){if(a!=this.S){var d=[a.O.create(),a.I.create()];Promise.all(d).then(J(this,function(d){var f=this.S;this.S=a;this.b=d[0];this.kd=d[1];this.rd=b;this.Sc=!0;this.Ob||(f?c&&xd(this,!0):this.fa(0))})).catch(J(this,function(a){"aborted"!=a.type&&(a=E(a),this.dispatchEvent(a))}))}};h.Cd=function(){return xd(this,!1)};
function xd(a,b){a.S&&!a.Ob&&(a.Ob=!0,a.Xb(),a.ea.abort().then(J(a,function(){var a=this.a.currentTime;if(!b&&0<Xc(this.ea,a)&&0<=nc(this.ea.ba,a))return Promise.resolve();this.Jc=!0;return this.ea.clear()})).then(J(a,function(){this.Ob=!1;this.fa(0)})).catch(J(a,function(a){this.Ob=!1;a=E(a);this.dispatchEvent(a)})))}h.oc=function(){};h.Cc=function(){return!0};
h.ze=function(){this.ha=null;var a=this.S,b=this.b,c=this.a.currentTime,d=Xc(this.ea,c),e=this.la?wd:Math.min(this.rd,wd)+(this.ya||0);if(d>=e)yd(this),this.fa(1E3/(Math.abs(this.a.playbackRate)||1));else if(b=zd(this,c,b)){var f=this.Sc;this.ea.Fb(b,this.kd).then(J(this,function(b){this.$b=!1;null==this.ya&&(this.ya=b);f&&(this.Sc=!1,b=a.n.split("/")[0],b=D({type:"adaptation",bubbles:!0,contentType:b,size:"video"!=b?null:{width:a.width,height:a.height},bandwidth:a.bandwidth}),this.dispatchEvent(b));
this.Jc&&0<Xc(this.ea,c)&&(this.Jc=!1,this.a.currentTime+=.001);this.fa(0)})).catch(J(this,function(a){if("aborted"!=a.type){var b=E(a);this.dispatchEvent(b);b=[0,404,410];"net"==a.type&&-1!=b.indexOf(a.Ye.status)&&this.fa(5E3)}}))}else yd(this),this.$b||(this.$b=!0,Ad(this)),this.fa(1E3)};function zd(a,b,c){a=a.ea;var d=a.ba.length;a=0<d?a.ba[d-1]:null;return null!=a?null!=a.endTime?c.find(a.endTime):null:c.find(b)}
function yd(a){if(!a.la&&null!=a.ya){a.la=!0;a.ea.Ba(a.ya);var b=D({type:"started",bubbles:!1,na:a.ya});a.dispatchEvent(b)}}function Ad(a){var b=D({type:"ended"});a.dispatchEvent(b)}h.fa=function(a){this.ha=window.setTimeout(this.ze.bind(this),a)};h.Xb=function(){null!=this.ha&&(window.clearTimeout(this.ha),this.ha=null)};function Bd(a,b){H.call(this,a);this.a=b;this.Db=!0;this.oa=this.b=this.S=null}q(Bd,H);Bd.prototype.destroy=function(){this.oa&&this.a.removeChild(this.oa);this.parent=this.a=this.S=this.b=this.oa=null};h=Bd.prototype;h.hd=function(){return!0};h.gd=function(){return!0};
h.Tb=function(a){a.O.create().then(J(this,function(b){if(this.a){this.S=a;this.b=b;if(0==b.length())return Promise.reject(Error("No subtitles URL available."));b=b.first().url.toString();var c=this.Cc();this.oa&&(this.oc(!1),this.a.removeChild(this.oa));this.oa=document.createElement("track");this.a.appendChild(this.oa);this.oa.src=b;this.oc(c)}}))};h.Cd=function(){};h.oc=function(a){this.Db=a;this.oa&&(this.oa.track.mode=a?"showing":"disabled")};h.Cc=function(){return this.Db};function Cd(){this.streamStats=null;this.droppedFrames=this.decodedFrames=NaN;this.bufferingTime=this.playTime=this.estimatedBandwidth=0;this.playbackLatency=NaN;this.bufferingHistory=[];this.bandwidthHistory=[];this.streamHistory=[]}function Dd(a){a.playTime+=ga("playing")/1E3}function Ed(a,b){var c=new Fd(b);a.streamHistory.push(new Gd(c));if(c.videoHeight||!a.streamStats)a.streamStats=c}
function Fd(a){this.videoWidth=a.width;this.videoHeight=a.height;this.videoMimeType=a.n;this.videoBandwidth=a.bandwidth}function Gd(a){this.timestamp=r()/1E3;this.value=a};function X(a){H.call(this,null);this.a=a;this.c=null;this.l=new Pa;this.Na=null;this.sa="en";this.tc=this.ic=null;this.gb=!1;this.J=new Cd;this.vc=!0;this.Ad=1;this.hc=new fb}q(X,H);m("shaka.player.Player",X);X.version="v1.4.0-3-ga4dc765";
X.isBrowserSupported=function(){return!!window.MediaSource&&!!window.MediaKeys&&!!window.navigator&&!!window.navigator.requestMediaKeySystemAccess&&!!window.MediaKeySystemAccess&&!!window.MediaKeySystemAccess.prototype.getConfiguration&&!!window.Promise&&!!HTMLVideoElement.prototype.getVideoPlaybackQuality&&!!Element.prototype.requestFullscreen&&!!document.exitFullscreen&&"fullscreenElement"in document&&!!window.Uint8Array};
function od(a){return"text/vtt"==a?!!window.VTTCue:MediaSource.isTypeSupported(a)}X.isTypeSupported=od;X.prototype.destroy=function(){return this.Uc().then(J(this,function(){this.l.destroy();this.a=this.l=null})).catch(function(){})};X.prototype.destroy=X.prototype.destroy;
X.prototype.Uc=function(){if(!this.c)return Promise.resolve();this.gb&&Hd(this);this.a.pause();Qa(this.l);Id(this);Jd(this);this.Na.destroy();this.Na=null;this.a.src="";var a=this.a.setMediaKeys(null);this.c&&(this.c.destroy(),this.c=null);this.gb=!1;this.J=new Cd;return a};X.prototype.unload=X.prototype.Uc;
X.prototype.load=function(a){var b=this.Uc();this.a.autoplay&&(ca("load"),G(this.l,this.a,"timeupdate",this.ke.bind(this)));a.Bb(this.vc);return b.then(J(this,function(){return a.load(this.sa)})).then(J(this,function(){this.c=a;this.c.xb(this.hc);this.Na=new md(this,this.a,this.c);return nd(this.Na)})).then(J(this,function(){G(this.l,this.a,"error",this.Lc.bind(this));G(this.l,this.a,"playing",this.Mc.bind(this));G(this.l,this.a,"pause",this.oe.bind(this));return this.c.Zc(this,this.a)})).then(J(this,
function(){Kd(this)})).catch(J(this,function(b){a.destroy();this.c=null;this.Na&&(this.Na.destroy(),this.Na=null);var d=E(b);this.dispatchEvent(d);return Promise.reject(b)}))};X.prototype.load=X.prototype.load;h=X.prototype;h.ke=function(){fa("load");this.J.playbackLatency=ga("load")/1E3;this.l.bb(this.a,"timeupdate")};h.Lc=function(a){this.a.error&&(a=this.a.error.code,a!=MediaError.MEDIA_ERR_ABORTED&&(a=Error(Ld[a]||"Unknown playback error."),a.type="playback",a=E(a),this.dispatchEvent(a)))};
h.Mc=function(){ca("playing");this.gb&&Hd(this)};h.oe=function(){fa("playing");Dd(this.J)};h.getStats=function(){this.a.paused||(fa("playing"),Dd(this.J),ca("playing"));var a=this.J,b=this.a.getVideoPlaybackQuality();b&&(a.decodedFrames=b.totalVideoFrames,a.droppedFrames=b.droppedVideoFrames);return this.J};X.prototype.getStats=X.prototype.getStats;X.prototype.Td=function(){var a=this.a.videoWidth,b=this.a.videoHeight;return a&&b?{width:a,height:b}:null};X.prototype.getCurrentResolution=X.prototype.Td;
X.prototype.getVideoTracks=function(){return this.c?this.c.getVideoTracks():[]};X.prototype.getVideoTracks=X.prototype.getVideoTracks;X.prototype.getAudioTracks=function(){return this.c?this.c.getAudioTracks():[]};X.prototype.getAudioTracks=X.prototype.getAudioTracks;X.prototype.bc=function(){return this.c?this.c.bc():[]};X.prototype.getTextTracks=X.prototype.bc;X.prototype.Rb=function(a,b){return this.c?this.c.Rb(a,void 0==b?!0:b):!1};X.prototype.selectVideoTrack=X.prototype.Rb;
X.prototype.kc=function(a){return this.c?this.c.kc(a,!1):!1};X.prototype.selectAudioTrack=X.prototype.kc;X.prototype.lc=function(a){return this.c?this.c.lc(a,!1):!1};X.prototype.selectTextTrack=X.prototype.lc;X.prototype.Cb=function(a){this.c&&this.c.Cb(a)};X.prototype.enableTextTrack=X.prototype.Cb;X.prototype.Bb=function(a){this.vc=a;this.c&&this.c.Bb(a)};X.prototype.enableAdaptation=X.prototype.Bb;X.prototype.Sd=function(){return this.vc};X.prototype.getAdaptationEnabled=X.prototype.Sd;
X.prototype.Ud=function(){return this.a.currentTime};X.prototype.getCurrentTime=X.prototype.Ud;X.prototype.Vd=function(){return this.a.duration};X.prototype.getDuration=X.prototype.Vd;X.prototype.Wd=function(){return this.a.muted};X.prototype.getMuted=X.prototype.Wd;X.prototype.$d=function(){return this.a.volume};X.prototype.getVolume=X.prototype.$d;X.prototype.play=function(){this.Fd(1);this.a.play()};X.prototype.play=X.prototype.play;X.prototype.pause=function(){this.a.pause()};
X.prototype.pause=X.prototype.pause;X.prototype.requestFullscreen=function(){this.a.requestFullscreen()};X.prototype.requestFullscreen=X.prototype.requestFullscreen;X.prototype.seek=function(a){this.a.currentTime=a};X.prototype.seek=X.prototype.seek;X.prototype.Qe=function(a){wd=0>a?0:a};X.prototype.setStreamBufferSize=X.prototype.Qe;X.prototype.Zd=function(){return wd};X.prototype.getStreamBufferSize=X.prototype.Zd;X.prototype.Le=function(a){Oc=a};X.prototype.setLicenseRequestTimeout=X.prototype.Le;
X.prototype.Me=function(a){Mc=a};X.prototype.setMpdRequestTimeout=X.prototype.Me;X.prototype.Pe=function(a){Qc=a};X.prototype.setRangeRequestTimeout=X.prototype.Pe;X.prototype.Ne=function(a){this.a.muted=a};X.prototype.setMuted=X.prototype.Ne;X.prototype.Re=function(a){this.a.volume=a};X.prototype.setVolume=X.prototype.Re;X.prototype.Oe=function(a){this.sa=Ja(a)};X.prototype.setPreferredLanguage=X.prototype.Oe;
X.prototype.Fd=function(a){Jd(this);0<=a?this.a.playbackRate=a:(this.a.playbackRate=0,this.wd(this.a.currentTime,Date.now(),a));this.Ad=a};X.prototype.setPlaybackRate=X.prototype.Fd;X.prototype.Xd=function(){return this.Ad};X.prototype.getPlaybackRate=X.prototype.Xd;X.prototype.xb=function(a){if(!(a instanceof fb))throw new TypeError("Argument must be a Restrictions instance.");this.hc=a.clone();this.c&&this.c.xb(this.hc)};X.prototype.setRestrictions=X.prototype.xb;X.prototype.Yd=function(){return this.hc.clone()};
X.prototype.getRestrictions=X.prototype.Yd;X.prototype.dc=function(){return this.c?this.c.dc():!1};X.prototype.isLive=X.prototype.dc;function Jd(a){a.ic&&(window.clearTimeout(a.ic),a.ic=null)}function Kd(a){Id(a);a.tc=window.setTimeout(a.Ae.bind(a),100)}function Id(a){a.tc&&(window.clearTimeout(a.tc),a.tc=null)}X.prototype.wd=function(a,b,c){this.a.currentTime=a+(Date.now()-b)/1E3*c;this.ic=window.setTimeout(this.wd.bind(this,a,b,c),100)};
function Hd(a){fa("buffering");var b=a.J;b.bufferingTime+=ga("buffering")/1E3;a.gb=!1;a.dispatchEvent(D({type:"bufferingEnd"}))}X.prototype.Ae=function(){Kd(this);if(!this.a.ended&&!this.a.seeking){var a=this.a.buffered,b=a.length?a.end(a.length-1):0,a=b-this.a.currentTime,b=b+.05;this.gb?a>this.c.ed()&&(Hd(this),this.a.play()):b<this.a.duration&&.1>a&&!this.a.paused&&(this.gb=!0,this.a.pause(),this.J.bufferingHistory.push(r()/1E3),ca("buffering"),this.dispatchEvent(D({type:"bufferingStart"})))}};
var Ld={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};function Md(){}Md.prototype.Ua=function(a){for(var b=0;b<a.length;++b)for(var c=a[b],d=0;d<c.u.length;++d){for(var e=c.u[d],f=e,g=0;g<f.f.length;++g)od(bd(f.f[g]))||(f.f.splice(g,1),--g);0==e.f.length&&(c.u.splice(d,1),--d)}for(b=0;b<a.length;++b)for(c=a[b],d=0;d<c.u.length;++d)c.u[d].f.sort(Nd)};function Nd(a,b){var c=a.bandwidth||Number.MAX_VALUE,d=b.bandwidth||Number.MAX_VALUE;return c<d?-1:c>d?1:0};function Od(a){this.ua=a}Od.prototype.destroy=function(){this.ua.destroy();this.ua=null};Od.prototype.update=function(a){var b=Pd(a),c=Pd(this.ua);return Promise.all([b,c]).then(function(b){var c=b[0];b=b[1];var f=new Md;f.Ua(this.ua.t);a.yb=this.ua.yb;a.Ub=this.ua.Ub?new L(this.ua.Ub):null;a.F=this.ua.F;var g=[];Qd(a,this.ua,c,b,g);f.Ua(a.t);return Promise.resolve(g)}.bind(this))};
function Pd(a){function b(a,b){return a.concat(b)}var c=a.t.map(function(a){return a.u}).reduce(b,[]).map(function(a){return a.f}).reduce(b,[]);a=c.map(function(a){return a.O.create()});return Promise.all(a).then(function(a){for(var b={},f=0;f<c.length;++f)b[c[f].K]=a[f];return Promise.resolve(b)})}
function Qd(a,b,c,d,e){var f=new F;a.t.forEach(function(a,b){f.push(a.id||""+b,a)});var g=new F;b.t.forEach(function(a,b){g.push(a.id||""+b,a)});a=f.keys();for(b=0;b<a.length;++b){var k=a[b],l=f.get(k);1<l.length||(k=g.get(k))&&0!=k.length&&1==k.length&&(Rd(l[0],k[0],c,d,e),l[0].duration=k[0].duration)}}
function Rd(a,b,c,d,e){var f=new F;a.u.forEach(function(a,b){f.push(a.id||""+b,a)});var g=new F;b.u.forEach(function(a,b){g.push(a.id||""+b,a)});a=f.keys();for(b=0;b<a.length;++b){var k=a[b],l=f.get(k);1<l.length||(k=g.get(k))&&0!=k.length&&1==k.length&&Sd(l[0],k[0],c,d,e)}}
function Sd(a,b,c,d,e){var f=new F;a.f.forEach(function(a,b){f.push(a.id||""+b,a)});var g=new F;b.f.forEach(function(a,b){g.push(a.id||""+b,a)});b={};for(var k=f.keys(),l=0;l<k.length;++l){var p=k[l];b[p]=p;var n=f.get(p);1<n.length||((p=g.get(p))&&0!=p.length?1==p.length&&(Td(n[0],p[0],c,d),n[0].I=p[0].I,p[0].I=null,n[0].timestampOffset=p[0].timestampOffset):(e.push(n[0]),a.f.splice(a.f.indexOf(n[0]),1)))}k=g.keys();for(l=0;l<k.length;++l)p=k[l],b[p]||(b[p]=p,p=g.get(p),a.f.push(p[0]))}
function Td(a,b,c,d){a=c[a.K];b=d[b.K];a.length();a.Ec(b)&&a.length()};function Y(){this.c=this.P=null;this.l=new Pa;this.pb=Number.POSITIVE_INFINITY;this.Db=!0}m("shaka.media.SimpleAbrManager",Y);Y.prototype.destroy=function(){this.l.destroy();this.c=this.P=this.l=null};Y.prototype.start=function(a,b){this.P&&this.c||(this.P=a,this.c=b,this.pb=Date.now()+4E3,G(this.l,this.P,"bandwidth",this.Kc.bind(this)),G(this.l,this.c,"adaptation",this.je.bind(this)))};Y.prototype.enable=function(a){this.Db=a};
Y.prototype.getInitialVideoTrackId=function(){if(!this.c||!this.P)return null;var a=Ud(this);return a?a.id:null};Y.prototype.Kc=function(){if(this.Db&&!(Date.now()<this.pb)){var a=Ud(this);if(a){if(a.active){this.pb=Date.now()+3E3;return}this.c.Rb(a.id,!1)}this.pb=Number.POSITIVE_INFINITY}};Y.prototype.je=function(){this.pb==Number.POSITIVE_INFINITY&&(this.pb=Date.now()+3E4)};
function Ud(a){var b=a.c.getVideoTracks();if(0==b.length)return null;b.sort(ka);var c;a:{c=a.c.getAudioTracks();for(var d=0;d<c.length;++d)if(c[d].active){c=c[d];break a}c=null}c=c?c.bandwidth:0;a=a.P.getBandwidth();for(var d=b[0],e=0;e<b.length;++e){var f=b[e],g=e+1<b.length?b[e+1]:{bandwidth:Number.POSITIVE_INFINITY};if(f.bandwidth&&(g=(g.bandwidth+c)/.85,a>=(f.bandwidth+c)/.95&&a<=g&&(d=f,d.active)))break}return d};function Vd(a,b,c){H.call(this,null);this.ee=a;this.Jd=b;this.D=c?c:gb();this.ma=null}q(Vd,H);m("shaka.player.HttpVideoSource",Vd);Vd.prototype.destroy=function(){this.ma&&(this.ma.parentElement.removeChild(this.ma),this.ma=null);this.parent=this.D=null};h=Vd.prototype;h.Zc=function(a,b){this.parent=a;var c=b.mediaKeys;b.src=this.ee;c=b.setMediaKeys(c);this.Jd&&(this.ma=document.createElement("track"),this.ma.src=this.Jd,b.appendChild(this.ma),this.ma.track.mode="showing");return c};h.load=function(){return Promise.resolve()};
h.getVideoTracks=function(){return[]};h.getAudioTracks=function(){return[]};h.bc=function(){return[]};h.ed=function(){return 5};h.dd=function(){var a=new fd;a.$=this.D;return[a]};h.Pc=function(){};h.Rb=function(){return!1};h.kc=function(){return!1};h.lc=function(){return!1};h.Cb=function(a){this.ma&&(this.ma.track.mode=a?"showing":"disabled")};h.Bb=function(){};h.xb=function(){};h.ac=function(){return[]};h.ec=function(){return!1};h.dc=function(){return!1};function Z(a,b,c){H.call(this,null);this.d=a;this.L=b;this.M=new Pa;this.W=new MediaSource;this.video=null;this.r=new F;this.zb=c;this.lb=!1;this.sa="";this.pc=!1;this.J=null;this.Vb=new I;this.Wb=null;this.yd=1;this.s={};this.sd=Number.POSITIVE_INFINITY;this.Kb=Number.NEGATIVE_INFINITY;this.Hc=0;this.ad=!1;this.Da={};this.Qb=this.ha=null}q(Z,H);m("shaka.player.StreamVideoSource",Z);
Z.prototype.destroy=function(){this.Qb&&(window.clearTimeout(this.Qb),this.Qb=null);this.Xb();this.Da=null;this.M.destroy();this.M=null;Na(this.s).forEach(function(a){a.destroy()});this.r=this.s=null;this.d&&(this.d.destroy(),this.d=null);this.zb.destroy();this.parent=this.Wb=this.Vb=this.J=this.video=this.W=this.L=this.zb=null};h=Z.prototype;
h.Zc=function(a,b){if(!this.lb){var c=Error("Cannot call attach() right now.");c.type="stream";return Promise.reject(c)}this.parent=a;this.video=b;this.J=a.getStats();G(this.M,this.W,"sourceopen",this.ne.bind(this));G(this.M,this.L,"bandwidth",this.Kc.bind(this));c=this.video.mediaKeys;this.video.src=window.URL.createObjectURL(this.W);c=this.video.setMediaKeys(c);return Promise.all([this.Vb,c])};
h.load=function(a){if(this.lb)return a=Error("Cannot call load() right now."),a.type="stream",Promise.reject(a);if(!this.d||0==this.d.t.length)return a=Error("The manifest does not specify any content."),a.type="stream",Promise.reject(a);this.sa=a;(new Md).Ua(this.d.t);if(0==this.d.t.length||0==this.d.t[0].u.length)return a=Error("The manifest specifies content that cannot be displayed on this browser/platform."),a.type="stream",Promise.reject(a);this.lb=!0;return Promise.resolve()};
h.xe=function(){var a=Date.now(),b=this.ha=null;this.xd(this.d.Ub).then(J(this,function(a){b=new Od(a);return b.update(this.d)})).then(J(this,function(c){b.destroy();b=null;for(var d=0;d<c.length;++d)Wd(this,c[d]);this.Wb&&this.xb(this.Wb);0==Object.keys(this.s).length?Xd(this):this.fa((Date.now()-a)/1E3)})).catch(J(this,function(a){b&&(b.destroy(),b=null);"aborted"!=a.type&&(a=E(a),this.dispatchEvent(a),this.d&&this.fa(0))}))};h.xd=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.")};
function Wd(a,b){var c=b.n.split("/")[0],d=a.s[c];if(d&&d.S==b){var e=a.r.get(b.n.split("/")[0]),f=e.map(function(a){return a.f}).reduce(function(a,b){return a.concat(b)},[]).filter(function(a){return a.enabled});if(0==f.length){e.push(b);return}a.Da[c].Qc==b&&delete a.Da[c];d.Tb(f[0],a.d.F,!0);b.destroy()}b.destroy()}
h.getVideoTracks=function(){if(!this.r.has("video"))return[];for(var a=this.s.video,a=(a=a?a.S:null)?a.K:0,b=[],c=this.r.get("video"),d=0;d<c.length;++d)for(var e=c[d],f=0;f<e.f.length;++f){var g=e.f[f];if(g.enabled){var k=g.K,g=new ja(k,g.bandwidth,g.width,g.height);k==a&&(g.active=!0);b.push(g)}}return b};
h.getAudioTracks=function(){if(!this.r.has("audio"))return[];for(var a=this.s.audio,a=(a=a?a.S:null)?a.K:0,b=[],c=this.r.get("audio"),d=0;d<c.length;++d)for(var e=c[d],f=e.lang,g=0;g<e.f.length;++g){var k=e.f[g],l=k.K,k=new ha(l,k.bandwidth,f);l==a&&(k.active=!0);b.push(k)}return b};
h.bc=function(){if(!this.r.has("text"))return[];for(var a=this.s.text,b=a?a.S:null,b=b?b.K:0,c=[],d=this.r.get("text"),e=0;e<d.length;++e)for(var f=d[e],g=f.lang,k=0;k<f.f.length;++k){var l=f.f[k].K,p=new ia(l,g);l==b&&(p.active=!0,p.enabled=a.Cc());c.push(p)}return c};h.ed=function(){return this.d&&this.d.F||0};h.dd=function(){return this.lb?this.d.t[0].Bc():[]};
h.Pc=function(a){if(this.lb){for(var b={},c=this.d.t[0],d=0;d<c.u.length;++d){var e=c.u[d];b[e.K]=e}this.r.clear();c=a.keys();for(d=0;d<c.length;++d){var e=c[d],f=a.get(e);if("video"==e){var g=f[0].id;this.r.push(e,b[g])}else if("audio"==e)for(var g=f[0].Fa.split(";")[0],k=0;k<f.length;++k){var l=f[k];l.Fa.split(";")[0]==g&&this.r.push(e,b[l.id])}else for(k=0;k<f.length;++k)g=f[k].id,this.r.push(e,b[g])}this.pc=!0;if(a=this.r.get("audio"))Yd(this,a),this.r.set("audio",a),a=a[0].lang||this.sa,Ia(2,
this.sa,a)&&(this.pc=!1);if(a=this.r.get("text"))Yd(this,a),this.r.set("text",a),a=a[0].lang||this.sa,Ia(2,this.sa,a)||(this.pc=!1)}};h.Rb=function(a,b){return Zd(this,"video",a,b)};h.kc=function(a,b){return Zd(this,"audio",a,b)};h.lc=function(a,b){return Zd(this,"text",a,b)};h.Cb=function(a){var b=this.s.text;b&&b.oc(a)};h.Bb=function(a){this.zb.enable(a)};
h.xb=function(a){if(this.lb){this.Wb=a;for(var b=0;b<this.d.t.length;++b)for(var c=this.d.t[b],d=0;d<c.u.length;++d)for(var e=c.u[d],f=0;f<e.f.length;++f){var g=e.f[f];g.enabled=!0;a.maxWidth&&g.width>a.maxWidth&&(g.enabled=!1);a.maxHeight&&g.height>a.maxHeight&&(g.enabled=!1);a.maxBandwidth&&g.bandwidth>a.maxBandwidth&&(g.enabled=!1);a.minBandwidth&&g.bandwidth<a.minBandwidth&&(g.enabled=!1)}}};h.ac=function(){return[]};h.ec=function(){return!1};h.dc=function(){return this.d?this.d.ia:!1};
function Zd(a,b,c,d){if(!a.r.has(b)||!a.s[b])return!1;for(var e=a.r.get(b),f=0;f<e.length;++f)for(var g=e[f],k=0;k<g.f.length;++k){var l=g.f[k];if(l.K==c){if("text"!=b&&!a.ad)return c=a.Da[b],a.Da[b]={Qc:l,bd:null!=c&&c.bd||d},!0;Ed(a.J,l);a.s[b].Tb(l,a.d.F,d);return!0}}return!1}function Yd(a,b){for(var c=0;2>=c;++c)for(var d=0;d<b.length;++d){var e=b[d];if(Ia(c,a.sa,e.lang)){b.splice(d,1);b.splice(0,0,e);return}}for(d=0;d<b.length;++d)if(e=b[d],e.Gb){b.splice(d,1);b.splice(0,0,e);break}}
h.ne=function(){this.M.bb(this.W,"sourceopen");Xd(this).then(J(this,function(){this.Vb.resolve()})).catch(J(this,function(a){this.Vb.reject(a)}))};
function Xd(a){for(var b=[],c=["audio","video","text"],d=0;d<c.length;++d){var e=c[d];a.r.has(e)&&b.push(a.r.get(e)[0])}a.zb.start(a.L,a);var f=$d(a,b),b=Na(f).map(function(a){return a.O.create()});return Promise.all(b).then(J(a,function(a){if(!a.every(function(a){return a.length()}))return a=Error("Some streams are not available."),a.type="stream",Promise.reject(a);a=ae(this,a);if(!a)return a=Error("Some streams are not available."),a.type="stream",Promise.reject(a);if(!be(this,f))return a=Error("Failed to create Stream objects."),
a.type="stream",Promise.reject(a);ce(this,f,a);return Promise.resolve()})).catch(J(a,function(a){if("aborted"!=a.type)return Object.keys(this.s),this.d.ia?(this.fa(0),Promise.resolve()):Promise.reject(a)}))}function $d(a,b){for(var c={},d=0;d<b.length;++d){var e=b[d],f=e.f[0];if("video"==e.contentType)for(var g=a.zb.getInitialVideoTrackId(),k=0;k<e.f.length&&(f=e.f[k],f.K!=g);++k);else"audio"==e.contentType&&(f=e.f[Math.floor(e.f.length/2)]);c[e.contentType]=f}return c}
function be(a,b){var c={},d;for(d in b){var e=b[d],e="text"==d?new Bd(a,a.video):de(a,e);if(!e)return Na(c).forEach(function(a){a.destroy()}),!1;c[d]=e}a.s=c;return!0}function de(a,b){var c;try{c=a.W.addSourceBuffer(bd(b))}catch(d){return null}try{c.timestampOffset=b.timestampOffset}catch(e){return null}return new vd(a,a.video,a.W,c,a.L)}
function ce(a,b,c){a.yd=a.video.playbackRate;a.video.playbackRate=0;var d;a.d.ia?(a.W.duration=c.end+2592E3,d=c.end):(a.W.duration=c.end-c.start,d=c.start);a.video.currentTime=d;ee(a,c.start,c.end);for(var e in a.s)c=a.s[e],G(a.M,c,"started",a.ve.bind(a)),G(a.M,c,"ended",a.ue.bind(a)),d=b[e],Ed(a.J,d),c.Tb(d,a.d.F,!1);a.Cb(a.pc)}h.ve=function(a){this.sd=Math.min(this.sd,a.na);this.Kb=Math.max(this.Kb,a.na);for(var b in this.s)if(!this.s[b].hd())return;fe(this)};
function fe(a){for(var b=ge(a),c=0;c<b.length;++c)b[c].Ba(a.Kb);he(a,b);b=Oa(a.r).map(function(a){return a.f}).reduce(function(a,b){return a.concat(b)},[]).map(function(a){var b=[a.O.create()];a.I&&b.push(a.I.create());return Promise.all(b)});Promise.all(b).then(J(a,function(a){for(var b=0;b<a.length;++b)a[b][0].Ba(this.Kb);this.ad=!0;for(var c in this.Da)a=this.Da[c],b=this.s[c],Ed(this.J,a.Qc),b.Tb(a.Qc,this.d.F,a.bd);this.Da={}})).catch(J(a,function(a){"aborted"!=a.type&&(a=E(a),this.dispatchEvent(a))}))}
function he(a,b){var c=ae(a,b);c&&ee(a,c.start,c.end);var d=a.video.currentTime+a.Kb;a.video.currentTime=d;a.d.ia&&(a.Hc=c.end-d);a.video.playbackRate=a.yd;G(a.M,a.video,"playing",function(){var a=this.video;this.M.bb(a,"playing");G(this.M,a,"playing",this.Mc.bind(this))}.bind(a));G(a.M,a.video,"seeking",function(){var a=this.video;this.M.bb(a,"seeking");G(this.M,a,"seeking",this.qe.bind(this))}.bind(a));null!=a.d.yb&&a.fa(a.Hc);ie(a)}
h.ye=function(){this.Qb=null;var a=ae(this,ge(this));a&&ee(this,a.start,a.end);ie(this)};function ee(a,b,c){b=D({type:"seekrangechanged",bubbles:!0,start:b,end:c});a.dispatchEvent(b)}h.Mc=function(){je(this)};h.qe=function(){if(!je(this))for(var a in this.s)this.s[a].Cd()};function je(a){var b=ae(a,ge(a));if(!b)return!1;var c=a.video.currentTime;if(c>=b.start-.01&&c<=b.end+.01)return!1;b=c<b.start?Math.min(b.start+(a.d.ia?a.d.F:0),b.end):b.end;a.video.currentTime=b;return!0}
h.ue=function(){if(!this.d.ia){for(var a in this.s)if(!this.s[a].gd())return;"open"==this.W.readyState&&this.W.endOfStream()}};h.Kc=function(){var a=this.J,b=this.L.getBandwidth();a.estimatedBandwidth=b;a.bandwidthHistory.push(new Gd(b))};function ge(a){return Na(a.s).map(function(a){return a.b}).filter(function(a){return null!=a})}
function ae(a,b){for(var c=0,d=Number.POSITIVE_INFINITY,e=0;e<b.length;++e){var f=b[e].Dc(),c=Math.max(c,f.start);null!=f.end&&(d=Math.min(d,f.end))}if(d==Number.POSITIVE_INFINITY)if(d=a.d.t[0],d.duration)d=(d.start||0)+d.duration;else return null;a.d.ia&&(d=Math.max(d-(a.d.F+a.Hc),c));return c>d?null:{start:c,end:d}}h.fa=function(a){if(null!=this.d.yb){var b=Math.max(this.d.yb,3);a=Math.max(b-a,0);this.ha=window.setTimeout(this.xe.bind(this),1E3*a)}};
h.Xb=function(){this.ha&&(window.clearTimeout(this.ha),this.ha=null)};function ie(a){a.d.ia&&(a.Qb=window.setTimeout(a.ye.bind(a),1E3))};function ke(a,b,c,d){c||(c=new Ta);d||(d=new Y);Z.call(this,null,c,d);this.ie=a;this.kb=b}q(ke,Z);m("shaka.player.DashVideoSource",ke);ke.prototype.destroy=function(){this.kb=null;Z.prototype.destroy.call(this)};ke.prototype.load=function(a){return(new Lc(this.ie)).send().then(J(this,function(b){this.d=(new id(this.kb)).Ua(b);return Z.prototype.load.call(this,a)}))};ke.prototype.xd=function(a){return(new Lc(a.toString())).send().then(J(this,function(a){a=(new id(this.kb)).Ua(a);return Promise.resolve(a)}))};function Gc(a,b){H.call(this,b);this.Ca=null;this.P=a}q(Gc,H);
function Hc(a){if(!window.indexedDB)return Promise.reject(Error("Offline storage requires IndexedDB support."));var b=new I,c=window.indexedDB.open("content_database",1);c.onupgradeneeded=J(a,function(a){this.Ca=a.target.result;le(this,"group_store",{keyPath:"group_id"});le(this,"stream_index_store",{keyPath:"stream_id"});a=le(this,"content_store",{autoIncrement:"true"});a.createIndex("segment",["stream_id","segment_id"],{unique:!0});a.createIndex("stream","stream_id",{unique:!1})});c.onsuccess=J(a,
function(a){this.Ca=a.target.result;b.resolve()});c.onerror=function(){b.reject(c.error)};return b}function W(a){a.Ca&&a.Ca.close()}function le(a,b,c){a.Ca.objectStoreNames.contains(b)&&a.Ca.deleteObjectStore(b);return a.Ca.createObjectStore(b,c)}
function me(a,b,c,d,e){for(var f=[],g=[],k=0,l=0,p=[],n=b.map(function(a){return a.O.create()}),n=Promise.all(n),y=b.map(function(a){return a.I.create()}),y=Promise.all(y),n=Promise.all([n,y]).then(function(a){f=a[0];g=a[1];k=f.reduce(function(a,b){return a+b.length()},0)}),y=0;y<b.length;++y)n=n.then(function(a){return ne(this,b[a],f[a],g[a],k,l)}.bind(a,y)),n=n.then(function(a,b){l+=f[a].length();p.push(b)}.bind(a,y));return n.then(J(a,function(){return oe(pe(this))})).then(J(a,function(a){var b=
new I,f={group_id:a,stream_ids:p,session_ids:c,duration:d,key_system:e.keySystem},g=pe(this).put(f);g.onsuccess=function(){b.resolve(a)};g.onerror=function(){b.reject(g.error)};return b}))}function ne(a,b,c,d,e,f){var g=[oe(qe(a)),oe(re(a).index("stream"))],g=Promise.all(g).then(J(a,function(a){return{Sb:Math.max(a[0],a[1]),vb:new ArrayBuffer(0),Oc:0,g:[],Ac:null,We:e,Bd:f}})),g=g.then(a.ae.bind(a,c));return g=g.then(a.be.bind(a,b,d))}
function oe(a){var b=new I,c=a.openCursor(null,"prev");c.onsuccess=function(a){a.target.result?b.resolve(a.target.result.key+1):b.resolve(0)};c.onerror=function(){b.reject(c.error)};return b}h=Gc.prototype;h.be=function(a,b,c){var d=new I;a={stream_id:c.Sb,mime_type:a.n,codecs:a.Z,init_segment:b,references:c.g};var e=qe(this).put(a);e.onsuccess=function(){d.resolve(c.Sb)};e.onerror=function(){d.reject(e.error)};return d};
h.ae=function(a,b){for(var c=Promise.resolve(),d=0;d<a.length();++d)var e=a.get(d),f=this.Nd.bind(this,e,b),c=c.then(this.He.bind(this,e)),c=c.then(f);return c.then(function(){return Promise.resolve(b)}).catch(J(this,function(a){se(this,b.Sb);return Promise.reject(a)}))};
h.Nd=function(a,b,c){var d=new I;0==b.vb.byteLength&&(b.Ac=a);b.vb=te(b.vb,c);b.Bd++;var e=D({type:"progress",detail:b.Bd/b.We*100,bubbles:!0});if(1048576<=b.vb.byteLength||null==a.endTime){c={stream_id:b.Sb,segment_id:b.Oc,content:b.vb};var f=re(this).put(c);b.g.push({start_time:b.Ac.startTime,start_byte:b.Ac.$a,end_time:a.endTime,url:"idb://"+b.Sb+"/"+b.Oc});b.Oc++;b.vb=new ArrayBuffer(0);f.onerror=function(){d.reject(f.error)};f.onsuccess=J(this,function(){this.dispatchEvent(e);d.resolve()})}else this.dispatchEvent(e),
d.resolve();return d};function te(a,b){var c=new Uint8Array(a.byteLength+b.byteLength);c.set(new Uint8Array(a),0);c.set(new Uint8Array(b),a.byteLength);return c.buffer}h.He=function(a){a=new Pc(a.url.toString(),a.$a,a.Eb);a.L=this.P;return a.send()};function Ic(a,b,c){return ue(re(a).index("segment"),[b,c]).then(function(a){return Promise.resolve(a.content)})}function ve(a,b){return ue(qe(a),b)}
function we(a,b){return ue(pe(a),b).then(function(a){return a.hasOwnProperty("duration")||a.hasOwnProperty("key_system")?Promise.resolve(a):ve(this,a.af[0]).then(function(b){a.duration=b.duration;a.ce=b.ce;return Promise.resolve(a)})}.bind(a))}function xe(a){var b=new I,c=[],d=pe(a).openCursor();d.onerror=function(){b.reject(d.error)};d.onsuccess=function(a){(a=a.target.result)?(c.push(a.key),a.continue()):b.resolve(c)};return b}
function ue(a,b){var c=new I,d=a.get(b);d.onerror=function(){c.reject(d.error)};d.onsuccess=function(){if(d.result)c.resolve(d.result);else{var a=Error("Item not found.");a.type="storage";c.reject(a)}};return c}
function se(a,b){var c=new I,d=qe(a).delete(b);d.onerror=function(){c.reject(d.error)};var e=re(a);e.index("stream").openKeyCursor(IDBKeyRange.only(b)).onsuccess=function(a){if(a=a.target.result)e.delete(a.primaryKey),a.continue()};e.transaction.oncomplete=function(){c.resolve()};return c}h.xc=function(a){return we(this,a).then(J(this,function(b){var c=[],d;for(d in b.stream_ids)c.push(se(this,b.stream_ids[d]));b=pe(this);c.push(b.delete(a));return Promise.all(c)}))};
function re(a){return ye(a,"content_store")}function qe(a){return ye(a,"stream_index_store")}function pe(a){return ye(a,"group_store")}function ye(a,b){return a.Ca.transaction([b],"readwrite").objectStore(b)};function ze(a){this.jc=a;this.b=null}ze.prototype.destroy=function(){this.jc=null;this.b&&(this.b.destroy(),this.b=null)};ze.prototype.create=function(){if(this.b)return Promise.resolve(this.b);for(var a=[],b=0;b<this.jc.length;++b){var c=this.jc[b];a.push(new S(c.start_time,c.end_time,c.start_byte,null,new L(c.url)))}this.jc=null;this.b=new T(a);return Promise.resolve(this.b)};function $(a,b,c){b||(b=new Ta);c||(c=new Y);Z.call(this,null,b,c);this.fd=a;this.nc=[];this.timeoutMs=3E4}q($,Z);m("shaka.player.OfflineVideoSource",$);$.retrieveGroupIds=function(){var a=new Gc(null,null),b=Hc(a).then(function(){return xe(a)});b.then(function(){W(a)}).catch(function(){W(a)});return b};
$.prototype.Te=function(a,b,c,d){var e,f={},g=[];a=new Lc(a);var k=Ja(b);return a.send().then(J(this,function(a){this.d=(new id(c)).Ua(a);return this.d.ia?Promise.reject(Error("Unable to store live streams offline.")):Z.prototype.load.call(this,k)})).then(J(this,function(){var a=document.createElement("video");a.src=window.URL.createObjectURL(this.W);e=new md(null,a,this);G(this.M,e,"sessionReady",this.se.bind(this));return nd(e)})).then(J(this,function(){for(var a=Oa(this.r),b=0;b<a.length;++b)for(var c=
a[b],e=0;e<c.f.length;++e){var g=c.f[e];f[g.K]=g}return d()})).then(J(this,function(a){for(var b=0;b<a.length;++b){var c=a[b],d=f[c];if(d)g.push(d);else return Promise.reject(Error("Invalid stream ID chosen: "+c))}var e=["audio","video"];g=g.filter(function(a){return 0>e.indexOf(a.n.split("/")[0])?!1:!0});a=g.map(function(a){return a.I.create()});return Promise.all(a)})).then(J(this,function(a){for(var b=g,c=[],d=0;d<b.length;++d)try{c[d]=this.W.addSourceBuffer(bd(b[d]))}catch(e){}if(b.length!=c.length)a=
Error("Error initializing streams."),a.type="storage",a=Promise.reject(a);else{for(d=0;d<a.length;++d)(b=a[d])&&c[d].appendBuffer(b);a=Promise.resolve()}return a})).then(J(this,function(){return qd(e,this.timeoutMs)})).then(J(this,function(){return Ae(this,g,e.D,this.d.t[0].duration)}))};$.prototype.store=$.prototype.Te;$.prototype.se=function(a){this.nc.push(a.detail.sessionId)};
function Ae(a,b,c,d){var e=new Gc(a.L,a),f=Hc(e);return f=f.then(J(a,function(){return me(e,b,this.nc,d,c)})).then(function(a){W(e);return Promise.resolve(a)}).catch(function(a){W(e);return Promise.reject(a)})}
$.prototype.load=function(a){var b=new Gc(null,null),c,d;return Hc(b).then(J(this,function(){return we(b,this.fd)})).then(J(this,function(a){var f=[];this.nc=a.session_ids;c=a.duration;d=a.key_system;for(var g=0;g<a.stream_ids.length;++g)f.push(ve(b,a.stream_ids[g]));return Promise.all(f)})).then(J(this,function(b){var f=c,g=d,k=new hd;k.F=5;for(var l=new gd,p=0;p<b.length;++p){var n=b[p],y=new $c,w=new ze(n.references),x=new Uint8Array(n.init_segment),x=new L("data:application/octet-stream;base64,"+
Za(x)),x=new Uc(new Rc(x,0,null));y.O=w;y.I=x;y.n=n.mime_type;y.Z=n.codecs;n=new bb(g,"",!1,null);w=new cd;w.f.push(y);w.Ma.push(n);w.contentType=y.n.split("/")[0];l.u.push(w);l.duration=f}k.t.push(l);this.d=k;return Z.prototype.load.call(this,a)})).then(function(){W(b);return Promise.resolve()}).catch(function(a){W(b);return Promise.reject(a)})};
$.prototype.xc=function(){var a=new Gc(null,null);return Hc(a).then(a.xc.bind(a,this.fd)).then(function(){W(a);return Promise.resolve()}).catch(function(b){W(a);return Promise.reject(b)})};$.prototype.deleteGroup=$.prototype.xc;$.prototype.ac=function(){return this.nc};$.prototype.ec=function(){return!0};}.bind(g,this))();
if (typeof(module)!="undefined"&&module.exports)module.exports=g.shaka;
else if (typeof(define)!="undefined")define(function(){return g.shaka});
else this.shaka=g.shaka;
})();

